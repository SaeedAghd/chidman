{% extends 'store_analysis/base.html' %}
{% load static %}

{% block title %}فرم تحلیل هوشمند فروشگاه{% endblock %}

{% block extra_css %}
<style>
    /* طراحی کلی */
    .analysis-form-container {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
        padding: 2rem 0;
    }

    /* بخش‌های فرم */
    .form-section {
        background: #ffffff;
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        border: 1px solid #e9ecef;
        transition: all 0.3s ease;
    }

    .form-section:hover {
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        transform: translateY(-2px);
    }

    .section-title-sm {
        color: #495057;
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        padding-bottom: 0.75rem;
        border-bottom: 2px solid #e9ecef;
        position: relative;
    }

    .section-title-sm::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 50px;
        height: 2px;
        background: linear-gradient(90deg, #667eea, #764ba2);
        border-radius: 1px;
    }

    .section-title-sm i {
        margin-right: 0.5rem;
        color: #667eea;
    }

    .form-card {
        background: white;
        border-radius: 2rem;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        margin: 0 auto;
        max-width: 1200px;
    }

    /* Header زیبا */
    .form-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 3rem 2rem;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .form-header::before {
        content: '';
        position: relative;
        display: block;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        animation: float 6s ease-in-out infinite;
        margin-bottom: 1rem;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(180deg); }
    }

    .form-header h2 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        position: relative;
        z-index: 2;
    }

    .form-header p {
        font-size: 1.1rem;
        opacity: 0.9;
        position: relative;
        z-index: 2;
    }

    /* Progress Bar پیشرفته */
    .progress-section {
        background: #f8f9fa;
        padding: 2rem;
        border-bottom: 1px solid #e9ecef;
    }

    .progress-container {
        position: relative;
        margin-bottom: 1rem;
    }

    .progress-bar {
        height: 12px;
        background: #e9ecef;
        border-radius: 6px;
        overflow: hidden;
        position: relative;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);
        border-radius: 6px;
        transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
    }

    .progress-fill::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
    }

    .progress-text {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
        font-weight: 600;
    }

    /* Step Indicator */
    .step-indicator {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 2rem 0;
        position: relative;
    }

    .step-indicator::before {
        content: '';
        position: absolute;
        top: 25px;
        left: 0;
        right: 0;
        height: 2px;
        background: #e9ecef;
        z-index: 1;
    }

    .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        z-index: 2;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .step-number {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: #e9ecef;
        color: #6c757d;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem;
        font-weight: 700;
        font-size: 1.2rem;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        border: 3px solid transparent;
    }

    .step.active .step-number {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        transform: scale(1.1);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    }

    .step.completed .step-number {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
        transform: scale(1.05);
    }

    .step-title {
        font-size: 0.9rem;
        font-weight: 600;
        text-align: center;
        color: #6c757d;
        transition: all 0.3s ease;
    }

    .step.active .step-title {
        color: #667eea;
        font-weight: 700;
    }

    .step.completed .step-title {
        color: #28a745;
    }

    /* Form Pages */
    .form-page {
        display: none;
        padding: 3rem 2rem;
        animation: slideIn 0.5s ease;
    }

    .form-page.active {
        display: block;
    }

    @keyframes slideIn {
        from { opacity: 0; transform: translateX(30px); }
        to { opacity: 1; transform: translateX(0); }
    }

    /* Section Headers */
    .section-header {
        text-align: center;
        margin-bottom: 3rem;
        position: relative;
    }

    .section-icon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        font-size: 2rem;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    .section-title {
        font-size: 2rem;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 1rem;
    }

    .section-subtitle {
        font-size: 1.1rem;
        color: #6c757d;
        line-height: 1.6;
    }

    /* Form Controls */
    .form-group {
        margin-bottom: 2rem;
    }

    .form-label {
        display: block;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 0.75rem;
        font-size: 1rem;
    }

    .required-field::after {
        content: ' *';
        color: #dc3545;
    }

    .form-control {
        width: 100%;
        border: 2px solid #e9ecef;
        border-radius: 1rem;
        padding: 1rem 1.25rem;
        font-size: 1rem;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        background: #f8f9fa;
    }

    .form-control:focus {
        outline: none;
        border-color: #667eea;
        background: white;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        transform: translateY(-2px);
    }

    .form-control.is-valid {
        border-color: #28a745;
        background: #f8fff9;
    }

    .form-control.is-invalid {
        border-color: #dc3545;
        background: #fff5f5;
    }

    /* Checkboxes and Radio Buttons */
    .form-check {
        margin-bottom: 1rem;
        padding: 1rem 1.25rem;
        border-radius: 1rem;
        transition: all 0.3s ease;
        border: 2px solid transparent;
        background: #f8f9fa;
    }

    .form-check:hover {
        background: #e9ecef;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .form-check-input {
        margin-right: 0.75rem;
        transform: scale(1.2);
    }

    .form-check-input:checked {
        background-color: #667eea;
        border-color: #667eea;
    }

    .form-check-label {
        font-weight: 500;
        color: #2c3e50;
        cursor: pointer;
    }

    /* Navigation Buttons */
    .nav-buttons {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 2rem;
        background: #f8f9fa;
        border-top: 1px solid #e9ecef;
    }

    .btn-nav {
        padding: 1rem 2rem;
        border-radius: 1rem;
        font-weight: 600;
        font-size: 1rem;
        border: none;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        align-items: center;
        gap: 0.75rem;
        min-width: 150px;
        justify-content: center;
    }

    .btn-prev {
        background: #6c757d;
        color: white;
    }

    .btn-next {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
    }

    .btn-submit {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
    }

    .btn-nav:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .btn-nav:active {
        transform: translateY(-1px);
    }

    .btn-nav:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
    }

    /* Section Dividers */
    .section-divider {
        margin: 3rem 0 2rem 0;
        padding: 2rem;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 1.5rem;
        border-left: 5px solid #667eea;
        position: relative;
    }

    .section-divider::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, transparent 30%, rgba(102, 126, 234, 0.05) 50%, transparent 70%);
        border-radius: 1.5rem;
        z-index: 1;
    }

    .section-divider h4 {
        color: #2c3e50;
        font-weight: 700;
        margin-bottom: 0.5rem;
        position: relative;
        z-index: 2;
    }

    .section-divider p {
        color: #6c757d;
        margin-bottom: 0;
        position: relative;
        z-index: 2;
    }

    /* Error Messages */
    .invalid-feedback {
        display: block;
        color: #dc3545;
        font-size: 0.875rem;
        margin-top: 0.5rem;
        padding: 0.75rem;
        background: #fff5f5;
        border-radius: 0.75rem;
        border: 1px solid #ffcdd2;
        animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Success Messages */
    .valid-feedback {
        display: block;
        color: #28a745;
        font-size: 0.875rem;
        margin-top: 0.5rem;
        padding: 0.75rem;
        background: #f8fff9;
        border-radius: 0.75rem;
        border: 1px solid #c3e6cb;
    }

    /* Info Cards */
    .info-card {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 1.5rem;
        border-radius: 1rem;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
    }

    .info-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    }

    .info-card h4 {
        margin-bottom: 1rem;
        font-weight: 600;
    }

    .info-card p {
        margin: 0;
        opacity: 0.9;
        line-height: 1.6;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .form-container {
            padding: 0.5rem;
        }
        
        .form-header {
            padding: 1rem 0.5rem;
        }
        
        .form-header h2 {
            font-size: 1.5rem;
        }
        
        .form-subtitle {
            font-size: 0.85rem;
        }

        .step-indicator {
            flex-direction: column;
            gap: 1rem;
        }

        .step-indicator::before {
            display: none;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
        }

        .step-number {
            margin: 0;
            width: 25px;
            height: 25px;
            font-size: 0.7rem;
        }
        
        .section-header {
            flex-direction: column;
            text-align: center;
            gap: 0.5rem;
        }
        
        .section-icon {
            width: 50px;
            height: 50px;
            font-size: 1.2rem;
        }

        .section-title {
            font-size: 1.2rem;
        }
        
        .section-subtitle {
            font-size: 0.8rem;
        }
        
        .info-card {
            padding: 1rem;
        }
        
        .info-card h4 {
            font-size: 0.9rem;
        }
        
        .info-card p {
            font-size: 0.8rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-label {
            font-size: 0.85rem;
        }
        
        .form-control {
            font-size: 0.9rem;
            padding: 0.5rem;
        }
        
        .form-check-label {
            font-size: 0.8rem;
        }

        .nav-buttons {
            flex-direction: column;
            gap: 0.5rem;
        }

        .btn-nav {
            width: 100%;
            justify-content: center;
        }
        
        .progress-container {
            margin: 1rem 0;
        }
    }

    /* Loading Spinner */
    .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    /* Toast Notifications */
    .toast-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
    }

    .toast {
        background: white;
        border-radius: 1rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        margin-bottom: 1rem;
        animation: slideInRight 0.3s ease;
    }

    @keyframes slideInRight {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
</style>
{% endblock %}

{% block content %}
<div class="analysis-form-container">
    <div class="form-card">
        <!-- Header -->
        <div class="form-header">
            <h2><i class="fas fa-store me-3"></i>فرم تحلیل هوشمند فروشگاه</h2>
            <p>با استفاده از هوش مصنوعی و الگوریتم‌های پیشرفته، فروشگاه خود را بهینه کنید</p>
        </div>

        <!-- Progress Section -->
        <div class="progress-section">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 16.67%;"></div>
                </div>
                <div class="progress-text">
                    <span id="progressText">مرحله 1 از 7</span>
                    <span id="progressPercent">16.7%</span>
                </div>
            </div>
        </div>
        
        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-title">تحلیل چیدمان<br><small>OpenCV</small></div>
            </div>
            <div class="step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-title">رفتار مشتری<br><small>TensorFlow</small></div>
            </div>
            <div class="step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-title">تحلیل ترافیک<br><small>Scikit-learn</small></div>
            </div>
            <div class="step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-title">تحلیل محصولات<br><small>pandas/seaborn</small></div>
            </div>
            <div class="step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-title">چیدمان فعلی<br><small>matplotlib</small></div>
            </div>
            <div class="step" data-step="6">
                <div class="step-number">6</div>
                <div class="step-title">اهداف بهینه‌سازی<br><small>⚙ scikit-learn</small></div>
            </div>
            <div class="step" data-step="7">
                <div class="step-number">7</div>
                <div class="step-title">گزارش نهایی<br><small>AI Report</small></div>
            </div>
        </div>

        <!-- Form -->
        <form id="analysisForm" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.non_field_errors }}
            
            <!-- Page 1: اطلاعات پایه فروشگاه (📦 pandas / numpy) -->
            <div class="form-page active" id="page-1">
                <div class="section-header">
                    <div class="section-icon">
                        📦
                    </div>
                    <h3 class="section-title">اطلاعات پایه فروشگاه</h3>
                    <p class="section-subtitle">pandas & numpy برای تحلیل ساختار کلی و محدودیت‌های فیزیکی فروشگاه</p>
                    </div>

                <div class="info-card">
                    <h4><i class="fas fa-info-circle me-2"></i>چرا این اطلاعات مهم است؟</h4>
                    <p>این اطلاعات به ما کمک می‌کند تا ساختار کلی فروشگاه را بسازیم و ظرفیت و محدودیت‌های فیزیکی را درک کنیم. با استفاده از pandas و numpy، الگوریتم‌های بهینه‌سازی دقیق‌تری طراحی می‌کنیم.</p>
                </div>

                <!-- اطلاعات اصلی فروشگاه -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-store"></i>نام فروشگاه
                            </label>
                            {{ form.store_name }}
                            {% if form.store_name.errors %}
                                <div class="invalid-feedback">{{ form.store_name.errors.0 }}</div>
                            {% endif %}
                    </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-tags"></i>نوع فروشگاه
                            </label>
                            {{ form.store_type }}
                            {% if form.store_type.errors %}
                                <div class="invalid-feedback">{{ form.store_type.errors.0 }}</div>
                            {% endif %}
                </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-ruler-combined"></i>مساحت کل فروشگاه (متر مربع)
                            </label>
                            {{ form.store_size }}
                            {% if form.store_size.errors %}
                                <div class="invalid-feedback">{{ form.store_size.errors.0 }}</div>
                            {% endif %}
                    </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-boxes"></i>تعداد قفسه‌ها
                            </label>
                            {{ form.shelf_count }}
                            {% if form.shelf_count.errors %}
                                <div class="invalid-feedback">{{ form.shelf_count.errors.0 }}</div>
                            {% endif %}
                </div>
                    </div>
                </div>

                <!-- مساحت بخش‌های مختلف -->
                <div class="section-divider">
                    <h4><i class="fas fa-chart-pie me-2"></i>مساحت بخش‌های مختلف فروشگاه</h4>
                    <p class="text-muted">برای تحلیل دقیق‌تر، مساحت هر بخش را مشخص کنید</p>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-apple-alt"></i>بخش مواد غذایی (متر مربع)
                            </label>
                            {{ form.food_section_size }}
                            {% if form.food_section_size.errors %}
                                <div class="invalid-feedback">{{ form.food_section_size.errors.0 }}</div>
                            {% endif %}
                    </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-wine-bottle"></i>بخش نوشیدنی‌ها (متر مربع)
                            </label>
                            {{ form.beverage_section_size }}
                            {% if form.beverage_section_size.errors %}
                                <div class="invalid-feedback">{{ form.beverage_section_size.errors.0 }}</div>
                            {% endif %}
                            </div>
                            </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-home"></i>بخش لوازم خانگی (متر مربع)
                            </label>
                            {{ form.household_section_size }}
                            {% if form.household_section_size.errors %}
                                <div class="invalid-feedback">{{ form.household_section_size.errors.0 }}</div>
                            {% endif %}
                    </div>
                </div>
            </div>

                <!-- اطلاعات تکمیلی -->
                <div class="section-divider">
                    <h4><i class="fas fa-cogs me-2"></i>اطلاعات تکمیلی</h4>
                    <p class="text-muted">برای تحلیل دقیق‌تر، این اطلاعات را نیز ارائه دهید</p>
            </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-map-marker-alt"></i>موقعیت مکانی
                            </label>
                            <input type="text" name="store_location" class="form-control" placeholder="آدرس یا منطقه فروشگاه">
                        </div>
                        </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-calendar-alt"></i>سال تأسیس
                            </label>
                            <input type="number" name="establishment_year" class="form-control" placeholder="مثال: 1395" min="1300" max="1410">
                    </div>
                    </div>
                            </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-users"></i>تعداد کارکنان
                            </label>
                            <input type="number" name="staff_count" class="form-control" placeholder="تعداد کارکنان" min="1" max="100">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-clock"></i>ساعات کاری
                            </label>
                            <select name="working_hours" class="form-control">
                                <option value="">انتخاب کنید</option>
                                <option value="8-12">8 صبح تا 12 شب</option>
                                <option value="9-21">9 صبح تا 9 شب</option>
                                <option value="7-23">7 صبح تا 11 شب</option>
                                <option value="24h">24 ساعته</option>
                                <option value="other">سایر</option>
                            </select>
                        </div>
                            </div>
                </div>
            </div>

            <!-- Page 2: اطلاعات مشتریان (👥 scikit-learn / scipy) -->
            <div class="form-page" id="page-2">
                <div class="section-header">
                    <div class="section-icon">
                        👥
                            </div>
                    <h3 class="section-title">اطلاعات مشتریان</h3>
                    <p class="section-subtitle">scikit-learn & scipy برای تحلیل الگوهای رفتاری و پیش‌بینی ترافیک مشتریان</p>
                </div>

                <div class="info-card">
                    <h4><i class="fas fa-info-circle me-2"></i>چرا این اطلاعات مهم است؟</h4>
                    <p>الگوهای رفتاری مشتریان به ما کمک می‌کند پیش‌بینی کنیم چه مسیرهایی شلوغ‌تر خواهند شد. با استفاده از scikit-learn و scipy، الگوریتم‌های پیش‌بینی دقیق‌تری طراحی می‌کنیم.</p>
                            </div>

                <!-- اطلاعات اصلی مشتریان -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-users"></i>میانگین مشتریان روزانه
                            </label>
                            {{ form.daily_customers }}
                            {% if form.daily_customers.errors %}
                                <div class="invalid-feedback">{{ form.daily_customers.errors.0 }}</div>
                            {% endif %}
                            </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-percentage"></i>درصد مشتریان تکراری
                        </label>
                            {{ form.repeat_customers_percentage }}
                            {% if form.repeat_customers_percentage.errors %}
                                <div class="invalid-feedback">{{ form.repeat_customers_percentage.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>
                    </div>

                <!-- الگوی خرید -->
                <div class="section-divider">
                    <h4><i class="fas fa-shopping-cart me-2"></i>الگوی خرید مشتریان</h4>
                    <p class="text-muted">نوع خرید بر مسیر حرکت و زمان حضور مشتریان تأثیر مستقیم دارد</p>
                    </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-clock"></i>الگوی خرید غالب
                            </label>
                            {{ form.purchase_pattern }}
                            {% if form.purchase_pattern.errors %}
                                <div class="invalid-feedback">{{ form.purchase_pattern.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-chart-line"></i>متوسط زمان حضور مشتری (دقیقه)
                            </label>
                            <input type="number" name="avg_customer_time" class="form-control" placeholder="مثال: 25" min="5" max="180">
                        </div>
                    </div>
                </div>

                <!-- ساعات اوج -->
                <div class="section-divider">
                    <h4><i class="fas fa-clock me-2"></i>ساعات اوج و ترافیک</h4>
                    <p class="text-muted">ساعات شلوغی برای برنامه‌ریزی نیروی انسانی و مدیریت صف‌ها</p>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-calendar-alt"></i>ساعات اوج ترافیک
                            </label>
                            <div class="row">
                                <div class="col-md-3">
                            <div class="form-check">
                                        {{ form.peak_hours.0 }}
                                        <label class="form-check-label" for="{{ form.peak_hours.0.id_for_label }}">
                                            <i class="fas fa-sun"></i>صبح (8-12)
                                        </label>
                        </div>
                                </div>
                                <div class="col-md-3">
                            <div class="form-check">
                                        {{ form.peak_hours.1 }}
                                        <label class="form-check-label" for="{{ form.peak_hours.1.id_for_label }}">
                                            <i class="fas fa-cloud-sun"></i>ظهر (12-16)
                                        </label>
                            </div>
                                </div>
                                <div class="col-md-3">
                            <div class="form-check">
                                        {{ form.peak_hours.2 }}
                                        <label class="form-check-label" for="{{ form.peak_hours.2.id_for_label }}">
                                            <i class="fas fa-moon"></i>عصر (16-20)
                                        </label>
                            </div>
                                </div>
                                <div class="col-md-3">
                            <div class="form-check">
                                        {{ form.peak_hours.3 }}
                                        <label class="form-check-label" for="{{ form.peak_hours.3.id_for_label }}">
                                            <i class="fas fa-star"></i>شب (20-24)
                                        </label>
                            </div>
                        </div>
                    </div>
                            {% if form.peak_hours.errors %}
                                <div class="invalid-feedback">{{ form.peak_hours.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- اطلاعات تکمیلی مشتریان -->
                <div class="section-divider">
                    <h4><i class="fas fa-chart-pie me-2"></i>اطلاعات تکمیلی مشتریان</h4>
                    <p class="text-muted">برای تحلیل دقیق‌تر، این اطلاعات را نیز ارائه دهید</p>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-percentage"></i>نرخ تبدیل (مشتری خریدار)
                            </label>
                            <input type="number" name="conversion_rate" class="form-control" placeholder="مثال: 75" min="1" max="100" step="0.1">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-money-bill-wave"></i>متوسط سبد خرید (تومان)
                            </label>
                            <input type="number" name="avg_basket_value" class="form-control" placeholder="مثال: 150000" min="1000" max="10000000">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-calendar-week"></i>روزهای شلوغ هفته
                            </label>
                            <select name="busy_weekdays" class="form-control" multiple>
                                <option value="monday">دوشنبه</option>
                                <option value="tuesday">سه‌شنبه</option>
                                <option value="wednesday">چهارشنبه</option>
                                <option value="thursday">پنج‌شنبه</option>
                                <option value="friday">جمعه</option>
                                <option value="saturday">شنبه</option>
                                <option value="sunday">یکشنبه</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-users-cog"></i>نوع مشتریان غالب
                            </label>
                            <select name="customer_type" class="form-control">
                                <option value="">انتخاب کنید</option>
                                <option value="individual">افراد مجرد</option>
                                <option value="family">خانواده‌ها</option>
                                <option value="elderly">سالمندان</option>
                                <option value="students">دانشجویان</option>
                                <option value="professionals">کارمندان</option>
                                <option value="mixed">ترکیبی</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- الگوهای رفتاری -->
                <div class="section-divider">
                    <h4><i class="fas fa-brain me-2"></i>الگوهای رفتاری خاص</h4>
                    <p class="text-muted">شناخت این الگوها به بهینه‌سازی چیدمان کمک می‌کند</p>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-map-marker-alt"></i>نقاط توقف مشتریان
                            </label>
                            <div class="form-check">
                                <input type="checkbox" name="stopping_points" value="entrance" class="form-check-input" id="stop_entrance">
                                <label class="form-check-label" for="stop_entrance">
                                    <i class="fas fa-door-open"></i>ورودی فروشگاه
                                </label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="stopping_points" value="promotions" class="form-check-input" id="stop_promotions">
                                <label class="form-check-label" for="stop_promotions">
                                    <i class="fas fa-tags"></i>قسمت تخفیف‌ها
                                </label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="stopping_points" value="new_products" class="form-check-input" id="stop_new_products">
                                <label class="form-check-label" for="stop_new_products">
                                    <i class="fas fa-star"></i>محصولات جدید
                                </label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="stopping_points" value="checkout" class="form-check-input" id="stop_checkout">
                                <label class="form-check-label" for="stop_checkout">
                                    <i class="fas fa-cash-register"></i>صندوق‌ها
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-route"></i>مسیرهای معمول مشتریان
                            </label>
                            <div class="form-check">
                                <input type="checkbox" name="customer_paths" value="clockwise" class="form-check-input" id="path_clockwise">
                                <label class="form-check-label" for="path_clockwise">
                                    <i class="fas fa-redo"></i>در جهت عقربه‌های ساعت
                                </label>
                        </div>
                            <div class="form-check">
                                <input type="checkbox" name="customer_paths" value="counterclockwise" class="form-check-input" id="path_counterclockwise">
                                <label class="form-check-label" for="path_counterclockwise">
                                    <i class="fas fa-undo"></i>خلاف عقربه‌های ساعت
                                </label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="customer_paths" value="random" class="form-check-input" id="path_random">
                                <label class="form-check-label" for="path_random">
                                    <i class="fas fa-random"></i>تصادفی
                                </label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="customer_paths" value="direct" class="form-check-input" id="path_direct">
                                <label class="form-check-label" for="path_direct">
                                    <i class="fas fa-arrow-right"></i>مستقیم به هدف
                                </label>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>

            <!-- Page 3: جریان حرکتی مشتریان (➡ networkx) -->
            <div class="form-page" id="page-3">
                <div class="section-header">
                    <div class="section-icon">
                        ➡
                    </div>
                    <h3 class="section-title">جریان حرکتی مشتریان</h3>
                    <p class="section-subtitle">networkx برای شبیه‌سازی شبکه حرکت مشتریان و شناسایی نقاط کور فروش</p>
                    </div>

                <div class="info-card">
                    <h4><i class="fas fa-info-circle me-2"></i>چرا این اطلاعات مهم است؟</h4>
                    <p>با این داده‌ها می‌توانیم شبکه حرکت مشتریان را شبیه‌سازی کنیم و نقاط کور فروش را پیدا کنیم. با استفاده از networkx، الگوریتم‌های تحلیل مسیر دقیق‌تری طراحی می‌کنیم.</p>
                </div>

                <!-- مسیر ورود تا اولین توقف -->
                <div class="section-divider">
                    <h4><i class="fas fa-route me-2"></i>مسیر ورود تا اولین توقف</h4>
                    <p class="text-muted">زمان و مسیر حرکت مشتریان از ورودی تا اولین توقف برای تحلیل الگوهای رفتاری</p>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-clock"></i>زمان ورود تا اولین توقف
                            </label>
                            {{ form.entrance_to_first_stop }}
                            {% if form.entrance_to_first_stop.errors %}
                                <div class="invalid-feedback">{{ form.entrance_to_first_stop.errors.0 }}</div>
                            {% endif %}
                    </div>
                </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-map-marker-alt"></i>اولین نقطه توقف غالب
                            </label>
                            <select name="first_stop_location" class="form-control">
                                <option value="">انتخاب کنید</option>
                                <option value="entrance">ورودی فروشگاه</option>
                                <option value="promotions">بخش تخفیف‌ها</option>
                                <option value="essentials">مواد ضروری</option>
                                <option value="fresh_food">مواد غذایی تازه</option>
                                <option value="beverages">نوشیدنی‌ها</option>
                                <option value="checkout">صندوق پرداخت</option>
                                <option value="other">سایر</option>
                            </select>
                    </div>
                </div>
                </div>

                                 <!-- مسیرهای پرتردد -->
                 <div class="section-divider">
                     <h4><i class="fas fa-chart-line me-2"></i>مسیرهای پرتردد و نقاط ازدحام</h4>
                     <p class="text-muted">مناطقی که بیشترین ترافیک مشتریان را دارند برای بهینه‌سازی چیدمان</p>
            </div>

                <div class="row">
                     <div class="col-12">
                        <div class="form-group">
                            <label class="form-label required-field">
                                 <i class="fas fa-users"></i>مناطق پرتردد
                            </label>
                             <div id="high-traffic-areas-container" class="row">
                                 <!-- گزینه‌ها به صورت پویا بر اساس نوع فروشگاه بارگذاری می‌شوند -->
                            </div>
                             {% if form.high_traffic_areas.errors %}
                                 <div class="invalid-feedback">{{ form.high_traffic_areas.errors.0 }}</div>
                             {% endif %}
                        </div>
                    </div>
                    </div>

                                 <!-- بخش‌هایی که معمولاً نادیده گرفته می‌شوند -->
                 <div class="section-divider">
                     <h4><i class="fas fa-eye-slash me-2"></i>بخش‌هایی که معمولاً نادیده گرفته می‌شوند</h4>
                     <p class="text-muted">شناخت این بخش‌ها به شناسایی نقاط کور فروش و بهینه‌سازی چیدمان کمک می‌کند</p>
                </div>

                                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label class="form-label">
                                 <i class="fas fa-exclamation-triangle"></i>بخش‌های نادیده گرفته شده
                            </label>
                             <div id="ignored-sections-container" class="row">
                                 <!-- گزینه‌ها به صورت پویا بر اساس نوع فروشگاه بارگذاری می‌شوند -->
                                    </div>
                             {% if form.ignored_sections.errors %}
                                 <div class="invalid-feedback">{{ form.ignored_sections.errors.0 }}</div>
                             {% endif %}
                                    </div>
                                </div>
                            </div>

                <!-- اطلاعات تکمیلی جریان حرکتی -->
                <div class="section-divider">
                    <h4><i class="fas fa-chart-pie me-2"></i>اطلاعات تکمیلی جریان حرکتی</h4>
                    <p class="text-muted">برای تحلیل دقیق‌تر، این اطلاعات را نیز ارائه دهید</p>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-route"></i>الگوی حرکت غالب
                            </label>
                            <select name="movement_pattern" class="form-control">
                                <option value="">انتخاب کنید</option>
                                <option value="clockwise">در جهت عقربه‌های ساعت</option>
                                <option value="counterclockwise">خلاف عقربه‌های ساعت</option>
                                <option value="random">تصادفی</option>
                                <option value="direct">مستقیم به هدف</option>
                                <option value="zigzag">زیگزاگ</option>
                                <option value="other">سایر</option>
                            </select>
                                            </div>
                                        </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-stopwatch"></i>متوسط زمان توقف در هر بخش (دقیقه)
                            </label>
                            <input type="number" name="avg_stop_time" class="form-control" placeholder="مثال: 2" min="0.5" max="30" step="0.5">
                                    </div>
                                            </div>
                                        </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-map-pin"></i>نقاط کور فروش
                            </label>
                            <textarea name="blind_spots" class="form-control" rows="3" placeholder="بخش‌هایی که مشتریان کمتر به آن‌ها توجه می‌کنند..."></textarea>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-lightbulb"></i>پیشنهادات بهبود جریان حرکتی
                            </label>
                            <textarea name="flow_improvements" class="form-control" rows="3" placeholder="ایده‌های شما برای بهبود جریان حرکتی مشتریان..."></textarea>
                                    </div>
                                            </div>
                                        </div>
                                    </div>

            <!-- Page 4: تحلیل محصولات و قفسه‌ها (📊 pandas / seaborn) -->
            <div class="form-page" id="page-4">
                <div class="section-header">
                    <div class="section-icon">
                        📊
                                            </div>
                    <h3 class="section-title">تحلیل محصولات و قفسه‌ها</h3>
                    <p class="section-subtitle">pandas & seaborn برای تحلیل محصولات پرفروش و کم‌فروش</p>
                                        </div>

                <div class="info-card">
                    <h4><i class="fas fa-chart-bar me-2"></i>چرا این اطلاعات مهم است؟</h4>
                    <p>شناخت محصولات مکمل به ما کمک می‌کند پیشنهادهای چیدمانی ارائه دهیم که فروش ترکیبی را افزایش دهد. با تحلیل الگوهای فروش، می‌توانیم استراتژی‌های بهینه‌سازی قفسه‌ها را طراحی کنیم.</p>
                                    </div>

                <!-- محصولات پرفروش -->
                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-star"></i>محصولات پرفروش
                            </label>
                            {{ form.top_selling_products }}
                            {% if form.top_selling_products.errors %}
                                <div class="invalid-feedback">{{ form.top_selling_products.errors.0 }}</div>
                            {% endif %}
                            <small class="form-text text-muted">مثال: نان، شیر، تخم مرغ، برنج، روغن، شکر</small>
                                </div>
                                </div>
                </div>

                <!-- محصولات مکمل -->
                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-link"></i>محصولات مکمل
                            </label>
                            {{ form.complementary_products }}
                            {% if form.complementary_products.errors %}
                                <div class="invalid-feedback">{{ form.complementary_products.errors.0 }}</div>
                            {% endif %}
                            <small class="form-text text-muted">مثال: نان و پنیر، چای و قند، کفش و جوراب، گوشی و قاب محافظ</small>
                            </div>
                        </div>
                    </div>

                <!-- محصولات فصلی -->
                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-calendar-alt"></i>محصولات فصلی
                            </label>
                            {{ form.seasonal_products }}
                            {% if form.seasonal_products.errors %}
                                <div class="invalid-feedback">{{ form.seasonal_products.errors.0 }}</div>
                            {% endif %}
                            <small class="form-text text-muted">مثال: میوه‌های تابستانی، لوازم مدرسه، لباس‌های زمستانی، لوازم عید</small>
                        </div>
                    </div>
                </div>

                <!-- محصولات کم‌فروش -->
                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-exclamation-triangle"></i>محصولات کم‌فروش
                            </label>
                            {{ form.low_selling_products }}
                            {% if form.low_selling_products.errors %}
                                <div class="invalid-feedback">{{ form.low_selling_products.errors.0 }}</div>
                            {% endif %}
                            <small class="form-text text-muted">محصولاتی که فروش کمی دارند و ممکن است نیاز به تغییر موقعیت یا حذف داشته باشند</small>
                        </div>
                    </div>
                </div>

                <!-- تحلیل قفسه‌ها -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-boxes"></i>تحلیل قفسه‌ها
                    </h5>
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-boxes"></i>تحلیل قفسه‌ها
                                </label>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="shelf_analysis[]" value="height_optimization" id="shelf_height">
                                            <label class="form-check-label" for="shelf_height">
                                                <i class="fas fa-arrows-alt-v"></i> بهینه‌سازی ارتفاع قفسه‌ها
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="shelf_analysis[]" value="spacing_optimization" id="shelf_spacing">
                                            <label class="form-check-label" for="shelf_spacing">
                                                <i class="fas fa-expand-arrows-alt"></i> بهینه‌سازی فاصله بین محصولات
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="shelf_analysis[]" value="lighting_analysis" id="shelf_lighting">
                                            <label class="form-check-label" for="shelf_lighting">
                                                <i class="fas fa-lightbulb"></i> تحلیل نورپردازی قفسه‌ها
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="shelf_analysis[]" value="product_grouping" id="shelf_grouping">
                                            <label class="form-check-label" for="shelf_grouping">
                                                <i class="fas fa-layer-group"></i> گروه‌بندی منطقی محصولات
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="shelf_analysis[]" value="signage_optimization" id="shelf_signage">
                                            <label class="form-check-label" for="shelf_signage">
                                                <i class="fas fa-tags"></i> بهینه‌سازی تابلوها و برچسب‌ها
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="shelf_analysis[]" value="inventory_rotation" id="shelf_rotation">
                                            <label class="form-check-label" for="shelf_rotation">
                                                <i class="fas fa-sync-alt"></i> چرخش موجودی و تاریخ انقضا
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            <!-- Page 5: چیدمان فعلی (🗺 matplotlib) -->
            <div class="form-page" id="page-5">
                <div class="section-header">
                    <div class="section-icon">
                        🗺
                    </div>
                    <h3 class="section-title">چیدمان فعلی فروشگاه</h3>
                    <p class="section-subtitle">matplotlib برای تحلیل و بهینه‌سازی چیدمان فعلی فروشگاه</p>
                </div>

                <div class="info-card">
                    <h4><i class="fas fa-map-marked-alt me-2"></i>چرا این اطلاعات مهم است؟</h4>
                    <p>این بخش کمک می‌کند بفهمیم چه جاهایی قابل تغییر نیست و چه جاهایی پتانسیل ایجاد تغییر دارند. با تحلیل چیدمان فعلی، می‌توانیم استراتژی‌های بهینه‌سازی دقیق‌تری طراحی کنیم.</p>
                </div>

                <!-- بخش 1: جایگاه صندوق -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-cash-register"></i>جایگاه صندوق‌های پرداخت
                    </h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label required-field">تعداد صندوق‌ها</label>
                                {{ form.checkout_count }}
                                {% if form.checkout_count.errors %}
                                    <div class="invalid-feedback">{{ form.checkout_count.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">موقعیت صندوق‌ها</label>
                                {{ form.checkout_location }}
                                {% if form.checkout_location.errors %}
                                    <div class="invalid-feedback">{{ form.checkout_location.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بخش 2: مناطق محدودیت‌دار -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-exclamation-triangle"></i>مناطق محدودیت‌دار
                    </h5>
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                {{ form.restricted_areas }}
                                {% if form.restricted_areas.errors %}
                                    <div class="invalid-feedback">{{ form.restricted_areas.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">مناطقی که قابل تغییر نیستند</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بخش 3: عناصر جاذب -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-magnet"></i>عناصر جاذب و نقاط کانونی
                    </h5>
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                {{ form.attraction_elements }}
                                {% if form.attraction_elements.errors %}
                                    <div class="invalid-feedback">{{ form.attraction_elements.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">عناصری که توجه مشتریان را جلب می‌کنند</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بخش 4: تحلیل فضای فروشگاه -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-ruler-combined"></i>تحلیل فضای فروشگاه
                    </h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">عرض راهروها (متر)</label>
                                {{ form.aisle_width }}
                                {% if form.aisle_width.errors %}
                                    <div class="invalid-feedback">{{ form.aisle_width.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">عرض متوسط راهروهای فروشگاه</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">فاصله بین قفسه‌ها (متر)</label>
                                {{ form.shelf_spacing }}
                                {% if form.shelf_spacing.errors %}
                                    <div class="invalid-feedback">{{ form.shelf_spacing.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">فاصله متوسط بین قفسه‌های موازی</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بخش 5: نقاط کور و مشکل‌دار -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-eye-slash"></i>نقاط کور و مشکل‌دار
                    </h5>
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                {{ form.problem_areas }}
                                {% if form.problem_areas.errors %}
                                    <div class="invalid-feedback">{{ form.problem_areas.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">مناطقی که مشتریان کمتر به آن‌ها توجه می‌کنند یا مشکلات خاصی دارند</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بخش 6: نقشه قفسه‌ها (آخرین بخش) -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-draw-polygon"></i>نقشه قفسه‌ها
                    </h5>
                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                                <label class="form-label">نوع و موقعیت قفسه‌های موجود در فروشگاه</label>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="fixed_shelves" value="entrance" id="shelf_entrance">
                                            <label class="form-check-label" for="shelf_entrance">
                                                <i class="fas fa-door-open"></i> قفسه‌های ورودی
                            </label>
                    </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="fixed_shelves" value="checkout" id="shelf_checkout">
                                            <label class="form-check-label" for="shelf_checkout">
                                                <i class="fas fa-cash-register"></i> قفسه‌های صندوق
                                            </label>
                            </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="fixed_shelves" value="wall_shelves" id="shelf_wall">
                                            <label class="form-check-label" for="shelf_wall">
                                                <i class="fas fa-border-all"></i> قفسه‌های دیواری
                                            </label>
                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="fixed_shelves" value="island_shelves" id="shelf_island">
                                            <label class="form-check-label" for="shelf_island">
                                                <i class="fas fa-square"></i> قفسه‌های جزیره‌ای
                                            </label>
                                        </div>
                            </div>
                                    <div class="col-md-6">
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="fixed_shelves" value="refrigerated" id="shelf_refrigerated">
                                            <label class="form-check-label" for="shelf_refrigerated">
                                                <i class="fas fa-snowflake"></i> قفسه‌های یخچالی
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="fixed_shelves" value="freezer" id="shelf_freezer">
                                            <label class="form-check-label" for="shelf_freezer">
                                                <i class="fas fa-icicles"></i> قفسه‌های فریزر
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="fixed_shelves" value="other" id="shelf_other">
                                            <label class="form-check-label" for="shelf_other">
                                                <i class="fas fa-ellipsis-h"></i> سایر
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <small class="form-text text-muted">نوع و موقعیت قفسه‌های موجود در فروشگاه</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Page 6: اهداف بهینه‌سازی (⚙ scikit-learn) -->
            <div class="form-page" id="page-6">
                <div class="section-header">
                    <div class="section-icon">
                        ⚙
                    </div>
                    <h3 class="section-title">اهداف بهینه‌سازی فروشگاه</h3>
                    <p class="section-subtitle">scikit-learn برای تحلیل و بهینه‌سازی اهداف فروشگاه</p>
                </div>

                <div class="info-card">
                    <h4><i class="fas fa-bullseye me-2"></i>چرا این اطلاعات مهم است؟</h4>
                    <p>این اطلاعات باعث می‌شود تحلیل دقیقاً متناسب با اهداف شما انجام شود، نه فقط یک پیشنهاد کلی. با تعریف اولویت‌ها و محدودیت‌ها، می‌توانیم راهکارهای شخصی‌سازی شده ارائه دهیم.</p>
                </div>

                <!-- بخش 1: اهداف کلی بهینه‌سازی -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-target"></i>اهداف کلی بهینه‌سازی
                    </h5>
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                {{ form.optimization_goals }}
                                {% if form.optimization_goals.errors %}
                                    <div class="invalid-feedback">{{ form.optimization_goals.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">اهداف اصلی که می‌خواهید از بهینه‌سازی چیدمان به دست آورید</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بخش 2: اولویت‌بندی اهداف -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-sort-amount-up"></i>اولویت‌بندی اهداف
                    </h5>
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                <label class="form-label required-field">مهم‌ترین هدف شما چیست؟</label>
                                {{ form.priority_goal }}
                                {% if form.priority_goal.errors %}
                                    <div class="invalid-feedback">{{ form.priority_goal.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">این انتخاب بر تمام پیشنهادات و راهکارهای ارائه شده تأثیر مستقیم خواهد داشت</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بخش 3: محدودیت بودجه -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-coins"></i>محدودیت بودجه تغییرات
                    </h5>
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                <label class="form-label required-field">محدوده بودجه برای تغییرات</label>
                                {{ form.budget_constraint }}
                                {% if form.budget_constraint.errors %}
                                    <div class="invalid-feedback">{{ form.budget_constraint.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">این اطلاعات به ما کمک می‌کند راهکارهای عملی و مقرون به صرفه ارائه دهیم</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بخش 4: زمان‌بندی اجرا -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-calendar-alt"></i>زمان‌بندی اجرای تغییرات
                    </h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">مهلت اجرای تغییرات</label>
                                <select class="form-control form-control-lg" name="implementation_timeline" data-step="6">
                                    <option value="">انتخاب کنید</option>
                                    <option value="immediate">فوری (کمتر از 1 هفته)</option>
                                    <option value="short_term">کوتاه‌مدت (1-4 هفته)</option>
                                    <option value="medium_term">متوسط‌مدت (1-3 ماه)</option>
                                    <option value="long_term">بلندمدت (3-12 ماه)</option>
                                    <option value="flexible">انعطاف‌پذیر</option>
                                </select>
                                <small class="form-text text-muted">زمان مورد نظر برای اجرای تغییرات</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">اولویت زمانی</label>
                                <select class="form-control form-control-lg" name="time_priority" data-step="6">
                                    <option value="">انتخاب کنید</option>
                                    <option value="speed">سرعت اجرا مهم‌تر است</option>
                                    <option value="quality">کیفیت مهم‌تر است</option>
                                    <option value="cost">هزینه مهم‌تر است</option>
                                    <option value="balanced">تعادل بین همه موارد</option>
                                </select>
                                <small class="form-text text-muted">کدام عامل در زمان‌بندی مهم‌تر است؟</small>
                            </div>
                        </div>
                    </div>
                </div>
                </div>

                <!-- بخش 5: محدودیت‌های عملیاتی -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-exclamation-triangle"></i>محدودیت‌های عملیاتی
                    </h5>
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                <label class="form-label">محدودیت‌های خاص</label>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="operational_constraints[]" value="business_hours" id="constraint_hours">
                                            <label class="form-check-label" for="constraint_hours">
                                                <i class="fas fa-clock"></i> عدم امکان تغییر در ساعات کاری
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="operational_constraints[]" value="staff_availability" id="constraint_staff">
                                            <label class="form-check-label" for="constraint_staff">
                                                <i class="fas fa-users"></i> محدودیت در دسترسی کارکنان
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="operational_constraints[]" value="customer_flow" id="constraint_customers">
                                            <label class="form-check-label" for="constraint_customers">
                                                <i class="fas fa-user-friends"></i> عدم امکان اختلال در جریان مشتریان
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="operational_constraints[]" value="supplier_delivery" id="constraint_supplier">
                                            <label class="form-check-label" for="constraint_supplier">
                                                <i class="fas fa-truck"></i> محدودیت در زمان تحویل تامین‌کنندگان
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="operational_constraints[]" value="seasonal_events" id="constraint_seasonal">
                                            <label class="form-check-label" for="constraint_seasonal">
                                                <i class="fas fa-calendar-day"></i> رویدادهای فصلی و مناسبت‌ها
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" name="operational_constraints[]" value="regulatory" id="constraint_regulatory">
                                            <label class="form-check-label" for="constraint_regulatory">
                                                <i class="fas fa-gavel"></i> محدودیت‌های قانونی و مقرراتی
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <small class="form-text text-muted">محدودیت‌هایی که باید در برنامه‌ریزی تغییرات در نظر گرفته شوند</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بخش 6: معیارهای موفقیت -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-chart-line"></i>معیارهای موفقیت
                    </h5>
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                <label class="form-label">چگونه موفقیت را اندازه‌گیری می‌کنید؟</label>
                                <textarea class="form-control" name="success_metrics" rows="4" placeholder="مثال: افزایش 20% فروش، کاهش 30% زمان انتظار، بهبود رضایت مشتریان به 85%" data-step="6"></textarea>
                                <small class="form-text text-muted">معیارهای کمی و کیفی برای ارزیابی موفقیت تغییرات</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- اطلاعات نرم‌افزاری -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-desktop"></i>نرم‌افزار صندوق
                            </label>
                            {{ form.pos_system }}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-warehouse"></i>نرم‌افزار مدیریت موجودی
                            </label>
                            {{ form.inventory_system }}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Page 7: Final Report (AI Report Generation) -->
            <div class="form-page" id="page-7">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <h3 class="section-title">گزارش نهایی</h3>
                    <p class="section-subtitle">هوش مصنوعی گزارش جامع و قابل اجرا تولید می‌کند</p>
                </div>

                <div class="info-card">
                    <h4><i class="fas fa-magic me-2"></i>چگونه کار می‌کند؟</h4>
                    <p>هوش مصنوعی با ترکیب تمام تحلیل‌ها، گزارش جامعی شامل نمودارها، پیشنهادات عملی و برنامه اجرایی تولید می‌کند.</p>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-user"></i>نام تحلیلگر
                            </label>
                            <input type="text" name="analyst_name" class="form-control" required>
                    </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label required-field">
                                <i class="fas fa-envelope"></i>ایمیل برای دریافت گزارش
                            </label>
                            <input type="email" name="report_email" class="form-control" required>
                </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-phone"></i>شماره تماس
                            </label>
                            <input type="tel" name="contact_phone" class="form-control">
                    </div>
                </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-calendar-alt"></i>تاریخ مورد نیاز گزارش
                            </label>
                            <input type="date" name="report_deadline" class="form-control">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-file-pdf"></i>نوع گزارش
                            </label>
                            <div class="form-check">
                                <input type="checkbox" name="report_types" value="pdf" class="form-check-input" id="report_pdf" checked>
                                <label class="form-check-label" for="report_pdf">PDF جامع</label>
                    </div>
                            <div class="form-check">
                                <input type="checkbox" name="report_types" value="excel" class="form-check-input" id="report_excel">
                                <label class="form-check-label" for="report_excel">فایل Excel</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="report_types" value="presentation" class="form-check-input" id="report_presentation">
                                <label class="form-check-label" for="report_presentation">ارائه پاورپوینت</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="report_types" value="dashboard" class="form-check-input" id="report_dashboard">
                                <label class="form-check-label" for="report_dashboard">داشبورد تعاملی</label>
                            </div>
                        </div>
                </div>
            </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-comments"></i>توضیحات اضافی
                            </label>
                            <textarea name="additional_notes" class="form-control" rows="4" placeholder="هرگونه توضیح یا درخواست خاص برای تحلیل..."></textarea>
                    </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-bell"></i>نحوه اطلاع‌رسانی
                            </label>
                            <div class="form-check">
                                <input type="checkbox" name="notifications" value="email" class="form-check-input" id="notify_email" checked>
                                <label class="form-check-label" for="notify_email">ایمیل</label>
                    </div>
                            <div class="form-check">
                                <input type="checkbox" name="notifications" value="sms" class="form-check-input" id="notify_sms">
                                <label class="form-check-label" for="notify_sms">پیامک</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="notifications" value="whatsapp" class="form-check-input" id="notify_whatsapp">
                                <label class="form-check-label" for="notify_whatsapp">واتساپ</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بخش آپلود فایل‌های تکمیلی -->
                <div class="form-section">
                    <h5 class="section-title-sm">
                        <i class="fas fa-upload"></i>آپلود فایل‌های تکمیلی برای تحلیل دقیق‌تر
                    </h5>
                    
                    <!-- تصاویر فروشگاه -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-camera"></i>تصاویر کلی فروشگاه
                                </label>
                                {{ form.store_photos }}
                                {% if form.store_photos.errors %}
                                    <div class="invalid-feedback">{{ form.store_photos.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">تصاویر کلی فروشگاه برای تحلیل بهتر</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-map"></i>نقشه یا طرح فروشگاه
                                </label>
                                {{ form.store_plan }}
                                {% if form.store_plan.errors %}
                                    <div class="invalid-feedback">{{ form.store_plan.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">نقشه، طرح یا کروکی فروشگاه (PDF, JPG, PNG, DWG)</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- تصاویر قفسه‌ها و ویترین‌ها -->
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-shelf"></i>تصاویر قفسه‌ها
                                </label>
                                {{ form.shelf_photos }}
                                {% if form.shelf_photos.errors %}
                                    <div class="invalid-feedback">{{ form.shelf_photos.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">تصاویر قفسه‌ها و چیدمان محصولات</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-door-open"></i>تصاویر ورودی
                                </label>
                                {{ form.entrance_photos }}
                                {% if form.entrance_photos.errors %}
                                    <div class="invalid-feedback">{{ form.entrance_photos.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">تصاویر ورودی و ویترین‌های ورودی</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-cash-register"></i>تصاویر صندوق
                                </label>
                                {{ form.checkout_photos }}
                                {% if form.checkout_photos.errors %}
                                    <div class="invalid-feedback">{{ form.checkout_photos.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">تصاویر صندوق‌ها و مناطق انتظار</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ویدیوها -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-video"></i>ویدیوی مسیر مشتریان
                                </label>
                                {{ form.customer_video }}
                                {% if form.customer_video.errors %}
                                    <div class="invalid-feedback">{{ form.customer_video.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">ویدیوی ضبط شده از مسیر حرکت مشتریان</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-cctv"></i>فیلم دوربین نظارتی
                                </label>
                                {{ form.surveillance_footage }}
                                {% if form.surveillance_footage.errors %}
                                    <div class="invalid-feedback">{{ form.surveillance_footage.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">فیلم‌های دوربین نظارتی برای تحلیل ترافیک</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- فایل‌های داده -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-chart-line"></i>فایل گزارش فروش
                                </label>
                                {{ form.sales_file }}
                                {% if form.sales_file.errors %}
                                    <div class="invalid-feedback">{{ form.sales_file.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">فایل Excel یا CSV گزارش فروش</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-book"></i>کاتالوگ محصولات
                                </label>
                                {{ form.product_catalog }}
                                {% if form.product_catalog.errors %}
                                    <div class="invalid-feedback">{{ form.product_catalog.errors.0 }}</div>
                                {% endif %}
                                <small class="form-text text-muted">کاتالوگ یا لیست محصولات فروشگاه</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="nav-buttons">
                <button type="button" class="btn-nav btn-prev" id="prevBtn" style="display: none;">
                    <i class="fas fa-arrow-right"></i>
                    مرحله قبل
                </button>
                <button type="button" class="btn-nav btn-next" id="nextBtn" style="display: flex;">
                    مرحله بعد
                    <i class="fas fa-arrow-left"></i>
                </button>
                <button type="submit" class="btn-nav btn-submit" id="submitBtn" style="display: none;">
                    <i class="fas fa-paper-plane"></i>
                    ارسال تحلیل
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Loading Modal -->
<div class="modal fade" id="loadingModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body text-center p-4">
                <div class="spinner mx-auto mb-3"></div>
                <h5>در حال پردازش...</h5>
                <p class="text-muted">لطفاً صبر کنید، هوش مصنوعی در حال تحلیل داده‌های شما است</p>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    let currentStep = 1;
            const totalSteps = 7;
    
    // Elements
    const pages = document.querySelectorAll('.form-page');
    const steps = document.querySelectorAll('.step');
    const progressFill = document.getElementById('progressFill');
    const progressText = document.getElementById('progressText');
    const progressPercent = document.getElementById('progressPercent');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
    const form = document.getElementById('analysisForm');
    
    // Initialize form
    function initForm() {
        updateProgress();
        updateButtons();
        showPage(currentStep);
        updateSteps();
        
        // Add event listeners
        prevBtn.addEventListener('click', prevStep);
        nextBtn.addEventListener('click', nextStep);
        form.addEventListener('submit', handleSubmit);
        
        // Add validation listeners
        addValidationListeners();
    }
    
    // Update progress bar and text
    function updateProgress() {
        const progress = (currentStep / totalSteps) * 100;
        progressFill.style.width = progress + '%';
        progressText.textContent = `مرحله ${currentStep} از ${totalSteps}`;
        progressPercent.textContent = progress.toFixed(1) + '%';
    }
    
    // Update navigation buttons
    function updateButtons() {
        console.log('Updating buttons for step:', currentStep);
        
        if (currentStep === 1) {
            prevBtn.style.display = 'none';
            nextBtn.style.display = 'flex';
            console.log('Step 1: Prev hidden, Next visible');
        } else {
            prevBtn.style.display = 'flex';
            console.log('Step > 1: Prev visible');
        }
        
        if (currentStep === totalSteps) {
            nextBtn.style.display = 'none';
            submitBtn.style.display = 'flex';
            console.log('Last step: Next hidden, Submit visible');
        } else {
            nextBtn.style.display = 'flex';
            submitBtn.style.display = 'none';
            console.log('Not last step: Next visible, Submit hidden');
        }
    }
    
    // Show specific page
    function showPage(step) {
        pages.forEach((page, index) => {
            if (index + 1 === step) {
                page.classList.add('active');
    } else {
                page.classList.remove('active');
            }
        });
    }
    
    // Update step indicators
    function updateSteps() {
        steps.forEach((step, index) => {
            const stepNumber = index + 1;
            step.classList.remove('active', 'completed');
            
            if (stepNumber === currentStep) {
                step.classList.add('active');
            } else if (stepNumber < currentStep) {
                step.classList.add('completed');
            }
        });
    }
    
    // Navigation functions
    function nextStep() {
        console.log('Next button clicked for step:', currentStep);
        const isValid = validateCurrentStep();
        console.log('Validation result:', isValid);
        
        if (isValid) {
            if (currentStep < totalSteps) {
                currentStep++;
                console.log('Moving to step:', currentStep);
                updateProgress();
                updateButtons();
                showPage(currentStep);
                updateSteps();
                scrollToTop();
            }
        } else {
            console.log('Validation failed, staying on step:', currentStep);
        }
    }
    
    function prevStep() {
        if (currentStep > 1) {
            currentStep--;
            updateProgress();
            updateButtons();
            showPage(currentStep);
            updateSteps();
            scrollToTop();
        }
    }
    
    // Validate current step
    function validateCurrentStep() {
        const currentPage = document.getElementById(`page-${currentStep}`);
        const requiredFields = currentPage.querySelectorAll('[required]');
        let isValid = true;
        
        console.log('Validating step:', currentStep);
        console.log('Required fields found:', requiredFields.length);
        
        requiredFields.forEach(field => {
            console.log('Validating field:', field.name, 'Type:', field.type, 'Value:', field.value);
            
            if (field.type === 'radio') {
                const radioGroup = currentPage.querySelectorAll(`input[name="${field.name}"]`);
                const isChecked = Array.from(radioGroup).some(radio => radio.checked);
                if (!isChecked) {
                    showFieldError(field, 'لطفاً یک گزینه انتخاب کنید');
                    isValid = false;
                    console.log('Radio validation failed for:', field.name);
                } else {
                    clearFieldError(field);
                }
            } else if (field.type === 'select-multiple') {
                if (field.selectedOptions.length === 0) {
                    showFieldError(field, 'لطفاً حداقل یک گزینه انتخاب کنید');
                    isValid = false;
                    console.log('Select-multiple validation failed for:', field.name);
                } else {
                    clearFieldError(field);
                }
            } else if (!field.value.trim()) {
                showFieldError(field, 'این فیلد الزامی است');
                isValid = false;
                console.log('Required field validation failed for:', field.name);
            } else {
                clearFieldError(field);
            }
        });
        
        // Special validations
        if (currentStep === 3) {
            // Validation for step 3 - Customer Flow Analysis
            const entranceToFirstStop = document.querySelector('select[name="entrance_to_first_stop"]');
            if (entranceToFirstStop && !entranceToFirstStop.value) {
                showFieldError(entranceToFirstStop, 'لطفاً زمان ورود تا اولین توقف را انتخاب کنید');
                    isValid = false;
            }
        }
        
        console.log('Final validation result:', isValid);
        return isValid;
    }
    
    // Show field error
    function showFieldError(field, message) {
        field.classList.add('is-invalid');
        field.classList.remove('is-valid');
        
        let errorDiv = field.parentNode.querySelector('.invalid-feedback');
        if (!errorDiv) {
            errorDiv = document.createElement('div');
            errorDiv.className = 'invalid-feedback';
            field.parentNode.appendChild(errorDiv);
        }
        errorDiv.textContent = message;
    }
    
    // Clear field error
    function clearFieldError(field) {
        field.classList.remove('is-invalid');
        field.classList.add('is-valid');
        
        const errorDiv = field.parentNode.querySelector('.invalid-feedback');
        if (errorDiv) {
            errorDiv.remove();
        }
    }
    
    // Add validation listeners
    function addValidationListeners() {
        const inputs = document.querySelectorAll('.form-control');
        inputs.forEach(input => {
            input.addEventListener('blur', function() {
                if (this.hasAttribute('required') && !this.value.trim()) {
                    showFieldError(this, 'این فیلد الزامی است');
                } else {
                    clearFieldError(this);
                }
            });
            
            input.addEventListener('input', function() {
                if (this.value.trim()) {
                    clearFieldError(this);
                }
        });
    });
    }
    
    // Handle form submission
    function handleSubmit(e) {
        e.preventDefault();
        
        if (validateCurrentStep()) {
            // Check file sizes before submission
            const fileInputs = document.querySelectorAll('input[type="file"]');
            let hasLargeFiles = false;
            
            fileInputs.forEach(input => {
                if (input.files[0]) {
                    const fileSize = input.files[0].size / 1024 / 1024; // MB
                    const isVideo = input.accept && input.accept.includes('video');
                    const maxSize = isVideo ? 50 : 10;
                    
                    if (fileSize > maxSize) {
                        hasLargeFiles = true;
                        alert(`فایل ${input.files[0].name} بزرگتر از ${maxSize} مگابایت است.`);
                    }
                }
            });
            
            if (hasLargeFiles) {
                return false;
            }
            
            // Show loading modal
            const loadingModal = new bootstrap.Modal(document.getElementById('loadingModal'));
            loadingModal.show();
            
            // Submit form
            form.submit();
        }
    }
    
    // File upload preview
    function setupFilePreview() {
        document.querySelectorAll('input[type="file"]').forEach(input => {
            input.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const fileSize = (file.size / 1024 / 1024).toFixed(2); // MB
                    const fileInfo = document.createElement('small');
                    fileInfo.className = 'text-info d-block mt-1 file-info';
                    fileInfo.innerHTML = `<i class="fas fa-file me-1"></i>${file.name} (${fileSize} MB)`;
                    
                    // Remove existing file info
                    const existingInfo = input.parentNode.querySelector('.file-info');
                    if (existingInfo) existingInfo.remove();
                    
                    input.parentNode.appendChild(fileInfo);
                }
            });
        });
    }
    
    // Scroll to top
    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }
    
    // Initialize form
    initForm();
    setupFilePreview();
     setupDynamicOptions();
    
    // Add smooth animations
    document.querySelectorAll('.form-check-input').forEach(input => {
        input.addEventListener('change', function() {
            this.closest('.form-check').style.transform = 'scale(1.02)';
            setTimeout(() => {
                this.closest('.form-check').style.transform = 'scale(1)';
            }, 200);
        });
    });
    
    // Add hover effects
    document.querySelectorAll('.form-control').forEach(input => {
        input.addEventListener('focus', function() {
            this.parentNode.style.transform = 'translateY(-2px)';
        });
        
        input.addEventListener('blur', function() {
            this.parentNode.style.transform = 'translateY(0)';
        });
    });
     
     // Dynamic options based on store type
     function setupDynamicOptions() {
         const storeTypeSelect = document.querySelector('select[name="store_type"]');
         if (storeTypeSelect) {
             storeTypeSelect.addEventListener('change', updateDynamicOptions);
             // Initialize on page load
             updateDynamicOptions();
         }
     }
     
     function updateDynamicOptions() {
         const storeType = document.querySelector('select[name="store_type"]').value;
         updateHighTrafficAreas(storeType);
         updateIgnoredSections(storeType);
     }
     
     function updateHighTrafficAreas(storeType) {
         const container = document.getElementById('high-traffic-areas-container');
         if (!container) return;
         
         const options = getHighTrafficAreasByStoreType(storeType);
         container.innerHTML = '';
         
         const itemsPerColumn = Math.ceil(options.length / 3);
         for (let i = 0; i < 3; i++) {
             const column = document.createElement('div');
             column.className = 'col-md-4';
             
             for (let j = 0; j < itemsPerColumn; j++) {
                 const index = i * itemsPerColumn + j;
                 if (index < options.length) {
                     const option = options[index];
                     const checkDiv = document.createElement('div');
                     checkDiv.className = 'form-check';
                     checkDiv.innerHTML = `
                         <input type="checkbox" name="high_traffic_areas" value="${option.value}" 
                                class="form-check-input" id="traffic_${option.value}">
                         <label class="form-check-label" for="traffic_${option.value}">
                             <i class="${option.icon}"></i>${option.label}
                         </label>
                     `;
                     column.appendChild(checkDiv);
                 }
             }
             container.appendChild(column);
         }
     }
     
     function updateIgnoredSections(storeType) {
         const container = document.getElementById('ignored-sections-container');
         if (!container) return;
         
         const options = getIgnoredSectionsByStoreType(storeType);
         container.innerHTML = '';
         
         const itemsPerColumn = Math.ceil(options.length / 3);
         for (let i = 0; i < 3; i++) {
             const column = document.createElement('div');
             column.className = 'col-md-4';
             
             for (let j = 0; j < itemsPerColumn; j++) {
                 const index = i * itemsPerColumn + j;
                 if (index < options.length) {
                     const option = options[index];
                     const checkDiv = document.createElement('div');
                     checkDiv.className = 'form-check';
                     checkDiv.innerHTML = `
                         <input type="checkbox" name="ignored_sections" value="${option.value}" 
                                class="form-check-input" id="ignored_${option.value}">
                         <label class="form-check-label" for="ignored_${option.value}">
                             <i class="${option.icon}"></i>${option.label}
                         </label>
                     `;
                     column.appendChild(checkDiv);
                 }
             }
             container.appendChild(column);
         }
     }
     
     function getHighTrafficAreasByStoreType(storeType) {
         const options = {
             // گزینه‌های عمومی برای همه فروشگاه‌ها
             'general': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // سوپرمارکت
             'supermarket': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'fresh_food', label: 'مواد غذایی تازه', icon: 'fas fa-apple-alt' },
                 { value: 'dairy', label: 'محصولات لبنی', icon: 'fas fa-cheese' },
                 { value: 'beverages', label: 'نوشیدنی‌ها', icon: 'fas fa-wine-bottle' },
                 { value: 'snacks', label: 'تنقلات', icon: 'fas fa-cookie-bite' },
                 { value: 'essentials', label: 'مواد ضروری', icon: 'fas fa-shopping-basket' },
                 { value: 'personal_care', label: 'لوازم بهداشتی', icon: 'fas fa-pump-soap' },
                 { value: 'household', label: 'لوازم خانگی', icon: 'fas fa-home' },
                 { value: 'frozen_food', label: 'مواد منجمد', icon: 'fas fa-snowflake' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // هایپرمارکت
             'hypermarket': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'fresh_food', label: 'مواد غذایی تازه', icon: 'fas fa-apple-alt' },
                 { value: 'dairy', label: 'محصولات لبنی', icon: 'fas fa-cheese' },
                 { value: 'beverages', label: 'نوشیدنی‌ها', icon: 'fas fa-wine-bottle' },
                 { value: 'snacks', label: 'تنقلات', icon: 'fas fa-cookie-bite' },
                 { value: 'essentials', label: 'مواد ضروری', icon: 'fas fa-shopping-basket' },
                 { value: 'personal_care', label: 'لوازم بهداشتی', icon: 'fas fa-pump-soap' },
                 { value: 'household', label: 'لوازم خانگی', icon: 'fas fa-home' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه راحتی
             'convenience': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'snacks', label: 'تنقلات', icon: 'fas fa-cookie-bite' },
                 { value: 'beverages', label: 'نوشیدنی‌ها', icon: 'fas fa-wine-bottle' },
                 { value: 'essentials', label: 'مواد ضروری', icon: 'fas fa-shopping-basket' },
                 { value: 'tobacco', label: 'محصولات دخانیات', icon: 'fas fa-smoking' },
                 { value: 'lottery', label: 'بلیط و قرعه‌کشی', icon: 'fas fa-ticket-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه پوشاک
             'clothing': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'men_clothing', label: 'پوشاک مردانه', icon: 'fas fa-male' },
                 { value: 'women_clothing', label: 'پوشاک زنانه', icon: 'fas fa-female' },
                 { value: 'kids_clothing', label: 'پوشاک کودکان', icon: 'fas fa-baby' },
                 { value: 'shoes', label: 'کفش', icon: 'fas fa-shoe-prints' },
                 { value: 'accessories', label: 'اکسسوری', icon: 'fas fa-gem' },
                 { value: 'underwear', label: 'لباس زیر', icon: 'fas fa-tshirt' },
                 { value: 'sports_wear', label: 'لباس ورزشی', icon: 'fas fa-running' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم الکترونیکی
             'electronics': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'mobile_phones', label: 'گوشی موبایل', icon: 'fas fa-mobile-alt' },
                 { value: 'laptops', label: 'لپ تاپ', icon: 'fas fa-laptop' },
                 { value: 'tablets', label: 'تبلت', icon: 'fas fa-tablet-alt' },
                 { value: 'accessories', label: 'لوازم جانبی', icon: 'fas fa-headphones' },
                 { value: 'gaming', label: 'بازی و سرگرمی', icon: 'fas fa-gamepad' },
                 { value: 'cameras', label: 'دوربین', icon: 'fas fa-camera' },
                 { value: 'audio', label: 'صوتی و تصویری', icon: 'fas fa-tv' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم خانگی
             'home_appliances': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'kitchen_appliances', label: 'لوازم آشپزخانه', icon: 'fas fa-utensils' },
                 { value: 'refrigerators', label: 'یخچال و فریزر', icon: 'fas fa-snowflake' },
                 { value: 'washing_machines', label: 'ماشین لباسشویی', icon: 'fas fa-tshirt' },
                 { value: 'air_conditioners', label: 'کولر و تهویه', icon: 'fas fa-wind' },
                 { value: 'small_appliances', label: 'لوازم کوچک', icon: 'fas fa-blender' },
                 { value: 'lighting', label: 'نورپردازی', icon: 'fas fa-lightbulb' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // داروخانه
             'pharmacy': [
                 { value: 'entrance', label: 'ورودی داروخانه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'prescription', label: 'بخش نسخه', icon: 'fas fa-prescription' },
                 { value: 'otc_medicines', label: 'داروهای بدون نسخه', icon: 'fas fa-pills' },
                 { value: 'vitamins', label: 'ویتامین‌ها', icon: 'fas fa-heartbeat' },
                 { value: 'personal_care', label: 'لوازم بهداشتی', icon: 'fas fa-pump-soap' },
                 { value: 'baby_care', label: 'لوازم نوزاد', icon: 'fas fa-baby' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'medical_devices', label: 'لوازم پزشکی', icon: 'fas fa-stethoscope' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // کتابفروشی
             'bookstore': [
                 { value: 'entrance', label: 'ورودی کتابفروشی', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'best_sellers', label: 'پرفروش‌ها', icon: 'fas fa-star' },
                 { value: 'new_releases', label: 'کتاب‌های جدید', icon: 'fas fa-book-open' },
                 { value: 'academic', label: 'کتاب‌های دانشگاهی', icon: 'fas fa-graduation-cap' },
                 { value: 'children_books', label: 'کتاب‌های کودکان', icon: 'fas fa-child' },
                 { value: 'stationery', label: 'لوازم التحریر', icon: 'fas fa-pencil-alt' },
                 { value: 'magazines', label: 'مجلات', icon: 'fas fa-newspaper' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه جواهرات
             'jewelry': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'rings', label: 'انگشتر', icon: 'fas fa-ring' },
                 { value: 'necklaces', label: 'گردنبند', icon: 'fas fa-gem' },
                 { value: 'earrings', label: 'گوشواره', icon: 'fas fa-diamond' },
                 { value: 'watches', label: 'ساعت', icon: 'fas fa-clock' },
                 { value: 'bracelets', label: 'دستبند', icon: 'fas fa-circle' },
                 { value: 'wedding_jewelry', label: 'جواهرات عروسی', icon: 'fas fa-heart' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه ورزشی
             'sports': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'football', label: 'فوتبال', icon: 'fas fa-futbol' },
                 { value: 'basketball', label: 'بسکتبال', icon: 'fas fa-basketball-ball' },
                 { value: 'fitness', label: 'تناسب اندام', icon: 'fas fa-dumbbell' },
                 { value: 'running', label: 'دویدن', icon: 'fas fa-running' },
                 { value: 'swimming', label: 'شنا', icon: 'fas fa-swimming-pool' },
                 { value: 'outdoor', label: 'ورزش‌های فضای باز', icon: 'fas fa-mountain' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم آرایشی
             'cosmetics': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'makeup', label: 'لوازم آرایش', icon: 'fas fa-palette' },
                 { value: 'skincare', label: 'مراقبت پوست', icon: 'fas fa-spa' },
                 { value: 'perfumes', label: 'عطر و ادکلن', icon: 'fas fa-spray-can' },
                 { value: 'hair_care', label: 'مراقبت مو', icon: 'fas fa-cut' },
                 { value: 'nail_care', label: 'مراقبت ناخن', icon: 'fas fa-hand-sparkles' },
                 { value: 'bath_body', label: 'حمام و بدن', icon: 'fas fa-bath' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // نانوایی و شیرینی‌فروشی
             'bakery': [
                 { value: 'entrance', label: 'ورودی نانوایی', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'fresh_bread', label: 'نان تازه', icon: 'fas fa-bread-slice' },
                 { value: 'pastries', label: 'شیرینی‌جات', icon: 'fas fa-birthday-cake' },
                 { value: 'cakes', label: 'کیک‌ها', icon: 'fas fa-cake-candles' },
                 { value: 'sandwiches', label: 'ساندویچ‌ها', icon: 'fas fa-hamburger' },
                 { value: 'beverages', label: 'نوشیدنی‌ها', icon: 'fas fa-coffee' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // قصابی و گوشت‌فروشی
             'butcher': [
                 { value: 'entrance', label: 'ورودی قصابی', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'beef', label: 'گوشت گاو', icon: 'fas fa-drumstick-bite' },
                 { value: 'lamb', label: 'گوشت گوسفند', icon: 'fas fa-drumstick-bite' },
                 { value: 'chicken', label: 'مرغ', icon: 'fas fa-drumstick-bite' },
                 { value: 'processed_meat', label: 'گوشت فرآوری شده', icon: 'fas fa-bacon' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // ماهی‌فروشی
             'fish_market': [
                 { value: 'entrance', label: 'ورودی ماهی‌فروشی', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'fresh_fish', label: 'ماهی تازه', icon: 'fas fa-fish' },
                 { value: 'frozen_fish', label: 'ماهی منجمد', icon: 'fas fa-snowflake' },
                 { value: 'seafood', label: 'غذای دریایی', icon: 'fas fa-water' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // سبزی‌فروشی
             'vegetable_market': [
                 { value: 'entrance', label: 'ورودی سبزی‌فروشی', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'fresh_vegetables', label: 'سبزیجات تازه', icon: 'fas fa-carrot' },
                 { value: 'fruits', label: 'میوه‌ها', icon: 'fas fa-apple-alt' },
                 { value: 'herbs', label: 'سبزیجات معطر', icon: 'fas fa-leaf' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // لبنیات‌فروشی
             'dairy_store': [
                 { value: 'entrance', label: 'ورودی لبنیات‌فروشی', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'milk', label: 'شیر', icon: 'fas fa-wine-bottle' },
                 { value: 'cheese', label: 'پنیر', icon: 'fas fa-cheese' },
                 { value: 'yogurt', label: 'ماست', icon: 'fas fa-cheese' },
                 { value: 'butter', label: 'کره', icon: 'fas fa-cheese' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // کفش‌فروشی
             'shoes_store': [
                 { value: 'entrance', label: 'ورودی کفش‌فروشی', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'men_shoes', label: 'کفش مردانه', icon: 'fas fa-shoe-prints' },
                 { value: 'women_shoes', label: 'کفش زنانه', icon: 'fas fa-shoe-prints' },
                 { value: 'kids_shoes', label: 'کفش کودکان', icon: 'fas fa-shoe-prints' },
                 { value: 'sports_shoes', label: 'کفش ورزشی', icon: 'fas fa-running' },
                 { value: 'formal_shoes', label: 'کفش رسمی', icon: 'fas fa-shoe-prints' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه اکسسوری
             'accessories': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'bags', label: 'کیف‌ها', icon: 'fas fa-shopping-bag' },
                 { value: 'belts', label: 'کمربندها', icon: 'fas fa-circle' },
                 { value: 'watches', label: 'ساعت‌ها', icon: 'fas fa-clock' },
                 { value: 'sunglasses', label: 'عینک آفتابی', icon: 'fas fa-glasses' },
                 { value: 'scarves', label: 'روسری و شال', icon: 'fas fa-scarf' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه مبلمان
             'furniture': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'living_room', label: 'اتاق نشیمن', icon: 'fas fa-couch' },
                 { value: 'bedroom', label: 'اتاق خواب', icon: 'fas fa-bed' },
                 { value: 'dining_room', label: 'اتاق غذاخوری', icon: 'fas fa-utensils' },
                 { value: 'office', label: 'دفتر کار', icon: 'fas fa-briefcase' },
                 { value: 'kitchen', label: 'آشپزخانه', icon: 'fas fa-utensils' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم آشپزخانه
             'kitchen_ware': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'cookware', label: 'ظروف پخت و پز', icon: 'fas fa-pot-food' },
                 { value: 'cutlery', label: 'قاشق و چنگال', icon: 'fas fa-utensils' },
                 { value: 'storage', label: 'ظروف نگهداری', icon: 'fas fa-box' },
                 { value: 'appliances', label: 'لوازم برقی', icon: 'fas fa-blender' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم باغبانی
             'garden_center': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'plants', label: 'گیاهان', icon: 'fas fa-seedling' },
                 { value: 'tools', label: 'ابزار باغبانی', icon: 'fas fa-tools' },
                 { value: 'soil', label: 'خاک و کود', icon: 'fas fa-mountain' },
                 { value: 'pots', label: 'گلدان‌ها', icon: 'fas fa-circle' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه ابزارآلات
             'hardware': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'hand_tools', label: 'ابزار دستی', icon: 'fas fa-hammer' },
                 { value: 'power_tools', label: 'ابزار برقی', icon: 'fas fa-bolt' },
                 { value: 'plumbing', label: 'لوله‌کشی', icon: 'fas fa-wrench' },
                 { value: 'electrical', label: 'برق و الکتریک', icon: 'fas fa-plug' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // عینک‌فروشی
             'optical': [
                 { value: 'entrance', label: 'ورودی عینک‌فروشی', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'eyeglasses', label: 'عینک طبی', icon: 'fas fa-glasses' },
                 { value: 'sunglasses', label: 'عینک آفتابی', icon: 'fas fa-sun' },
                 { value: 'contact_lenses', label: 'لنز تماسی', icon: 'fas fa-eye' },
                 { value: 'frames', label: 'فریم عینک', icon: 'fas fa-glasses' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم التحریر
             'stationery': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'pens', label: 'خودکار و مداد', icon: 'fas fa-pen' },
                 { value: 'notebooks', label: 'دفتر و کاغذ', icon: 'fas fa-book' },
                 { value: 'art_supplies', label: 'لوازم هنری', icon: 'fas fa-palette' },
                 { value: 'office_supplies', label: 'لوازم اداری', icon: 'fas fa-briefcase' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه موسیقی
             'music_store': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'instruments', label: 'سازها', icon: 'fas fa-guitar' },
                 { value: 'accessories', label: 'لوازم جانبی', icon: 'fas fa-headphones' },
                 { value: 'sheet_music', label: 'نت موسیقی', icon: 'fas fa-music' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه اسباب بازی
             'toy_store': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'educational', label: 'اسباب بازی آموزشی', icon: 'fas fa-graduation-cap' },
                 { value: 'action_figures', label: 'عروسک و شخصیت‌ها', icon: 'fas fa-child' },
                 { value: 'board_games', label: 'بازی‌های فکری', icon: 'fas fa-chess' },
                 { value: 'outdoor_toys', label: 'اسباب بازی فضای باز', icon: 'fas fa-child' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه ساعت
             'watches': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'luxury_watches', label: 'ساعت‌های لوکس', icon: 'fas fa-clock' },
                 { value: 'sports_watches', label: 'ساعت‌های ورزشی', icon: 'fas fa-running' },
                 { value: 'smart_watches', label: 'ساعت‌های هوشمند', icon: 'fas fa-mobile-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه عطر
             'perfume': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'men_perfumes', label: 'عطر مردانه', icon: 'fas fa-male' },
                 { value: 'women_perfumes', label: 'عطر زنانه', icon: 'fas fa-female' },
                 { value: 'unisex_perfumes', label: 'عطرهای مشترک', icon: 'fas fa-venus-mars' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم اسپا
             'spa_products': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'massage_oils', label: 'روغن‌های ماساژ', icon: 'fas fa-spa' },
                 { value: 'aromatherapy', label: 'عطر درمانی', icon: 'fas fa-leaf' },
                 { value: 'bath_products', label: 'محصولات حمام', icon: 'fas fa-bath' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه تجهیزات بدنسازی
             'fitness_equipment': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'cardio_equipment', label: 'تجهیزات کاردیو', icon: 'fas fa-heartbeat' },
                 { value: 'strength_equipment', label: 'تجهیزات قدرتی', icon: 'fas fa-dumbbell' },
                 { value: 'yoga_equipment', label: 'تجهیزات یوگا', icon: 'fas fa-pray' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم یدکی خودرو
             'auto_parts': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'engine_parts', label: 'قطعات موتور', icon: 'fas fa-cog' },
                 { value: 'brake_parts', label: 'قطعات ترمز', icon: 'fas fa-stop-circle' },
                 { value: 'electrical_parts', label: 'قطعات الکتریکی', icon: 'fas fa-bolt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه حیوانات خانگی
             'pet_shop': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'dog_supplies', label: 'لوازم سگ', icon: 'fas fa-dog' },
                 { value: 'cat_supplies', label: 'لوازم گربه', icon: 'fas fa-cat' },
                 { value: 'fish_supplies', label: 'لوازم ماهی', icon: 'fas fa-fish' },
                 { value: 'bird_supplies', label: 'لوازم پرنده', icon: 'fas fa-dove' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // گل‌فروشی
             'flower_shop': [
                 { value: 'entrance', label: 'ورودی گل‌فروشی', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'fresh_flowers', label: 'گل‌های تازه', icon: 'fas fa-flower' },
                 { value: 'artificial_flowers', label: 'گل‌های مصنوعی', icon: 'fas fa-seedling' },
                 { value: 'bouquets', label: 'دسته گل', icon: 'fas fa-bouquet' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه هدیه
             'gift_shop': [
                 { value: 'entrance', label: 'ورودی فروشگاه', icon: 'fas fa-door-open' },
                 { value: 'checkout', label: 'صندوق پرداخت', icon: 'fas fa-cash-register' },
                 { value: 'promotions', label: 'بخش تخفیف‌ها', icon: 'fas fa-tags' },
                 { value: 'personalized_gifts', label: 'هدایای شخصی‌سازی شده', icon: 'fas fa-gift' },
                 { value: 'seasonal_gifts', label: 'هدایای فصلی', icon: 'fas fa-calendar' },
                 { value: 'novelty_items', label: 'اشیاء تزئینی', icon: 'fas fa-star' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ]
         };
         
         return options[storeType] || options['general'];
     }
     
     function getIgnoredSectionsByStoreType(storeType) {
         const options = {
             // گزینه‌های عمومی برای همه فروشگاه‌ها
             'general': [
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // سوپرمارکت
             'supermarket': [
                 { value: 'frozen_foods', label: 'مواد غذایی منجمد', icon: 'fas fa-snowflake' },
                 { value: 'canned_goods', label: 'کنسروها و مواد کنسروی', icon: 'fas fa-can-food' },
                 { value: 'cleaning_supplies', label: 'مواد شوینده و بهداشتی', icon: 'fas fa-broom' },
                 { value: 'pet_food', label: 'غذای حیوانات خانگی', icon: 'fas fa-paw' },
                 { value: 'baby_products', label: 'محصولات نوزاد و کودک', icon: 'fas fa-baby' },
                 { value: 'health_supplements', label: 'مکمل‌های غذایی و ویتامین‌ها', icon: 'fas fa-pills' },
                 { value: 'organic_section', label: 'بخش محصولات ارگانیک', icon: 'fas fa-leaf' },
                 { value: 'ethnic_foods', label: 'مواد غذایی قومی و محلی', icon: 'fas fa-globe' },
                 { value: 'beverages_aisle', label: 'راهرو نوشیدنی‌ها', icon: 'fas fa-wine-bottle' },
                 { value: 'snacks_corner', label: 'گوشه تنقلات و میان‌وعده', icon: 'fas fa-cookie-bite' },
                 { value: 'bakery_section', label: 'بخش نانوایی و شیرینی', icon: 'fas fa-birthday-cake' },
                 { value: 'dairy_corner', label: 'گوشه لبنیات', icon: 'fas fa-cheese' },
                 { value: 'meat_counter', label: 'پیشخوان گوشت و پروتئین', icon: 'fas fa-drumstick-bite' },
                 { value: 'produce_section', label: 'بخش میوه و سبزیجات', icon: 'fas fa-carrot' },
                 { value: 'condiments_aisle', label: 'راهرو چاشنی‌ها و سس‌ها', icon: 'fas fa-pepper-hot' },
                 { value: 'pasta_grains', label: 'ماکارونی و غلات', icon: 'fas fa-wheat-awn' },
                 { value: 'cereal_breakfast', label: 'غلات صبحانه', icon: 'fas fa-bowl-food' },
                 { value: 'candy_sweets', label: 'آبنبات و شیرینی‌جات', icon: 'fas fa-candy-cane' },
                 { value: 'paper_products', label: 'محصولات کاغذی و دستمال', icon: 'fas fa-toilet-paper' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // هایپرمارکت
             'hypermarket': [
                 { value: 'electronics_department', label: 'بخش لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing_department', label: 'بخش پوشاک و مد', icon: 'fas fa-tshirt' },
                 { value: 'home_furnishings', label: 'لوازم خانگی و دکوراسیون', icon: 'fas fa-couch' },
                 { value: 'sports_equipment', label: 'لوازم ورزشی و تفریحی', icon: 'fas fa-dumbbell' },
                 { value: 'automotive_section', label: 'بخش لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'garden_center', label: 'مرکز باغبانی و فضای سبز', icon: 'fas fa-seedling' },
                 { value: 'pharmacy_section', label: 'بخش داروخانه و بهداشتی', icon: 'fas fa-pills' },
                 { value: 'bookstore_section', label: 'بخش کتاب و لوازم التحریر', icon: 'fas fa-book' },
                 { value: 'jewelry_counter', label: 'پیشخوان جواهرات و ساعت', icon: 'fas fa-gem' },
                 { value: 'cosmetics_department', label: 'بخش لوازم آرایشی و بهداشتی', icon: 'fas fa-palette' },
                 { value: 'toy_section', label: 'بخش اسباب بازی و سرگرمی', icon: 'fas fa-gamepad' },
                 { value: 'pet_supplies', label: 'لوازم حیوانات خانگی', icon: 'fas fa-paw' },
                 { value: 'seasonal_items', label: 'محصولات فصلی و مناسبت‌ها', icon: 'fas fa-calendar-alt' },
                 { value: 'bulk_foods', label: 'مواد غذایی عمده و فله‌ای', icon: 'fas fa-weight-hanging' },
                 { value: 'prepared_foods', label: 'غذاهای آماده و رستوران', icon: 'fas fa-utensils' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه راحتی
             'convenience': [
                 { value: 'fresh_produce', label: 'میوه و سبزیجات تازه', icon: 'fas fa-apple-alt' },
                 { value: 'dairy_products', label: 'محصولات لبنی', icon: 'fas fa-cheese' },
                 { value: 'bakery_items', label: 'محصولات نانوایی', icon: 'fas fa-bread-slice' },
                 { value: 'frozen_section', label: 'بخش منجمد', icon: 'fas fa-snowflake' },
                 { value: 'household_items', label: 'لوازم خانگی و شوینده', icon: 'fas fa-home' },
                 { value: 'personal_care', label: 'لوازم بهداشتی شخصی', icon: 'fas fa-soap' },
                 { value: 'magazines_books', label: 'مجلات و کتاب‌ها', icon: 'fas fa-newspaper' },
                 { value: 'automotive_supplies', label: 'لوازم خودرو و بنزین', icon: 'fas fa-gas-pump' },
                 { value: 'lottery_tickets', label: 'بلیط‌های بخت‌آزمایی', icon: 'fas fa-ticket-alt' },
                 { value: 'prepaid_cards', label: 'کارت‌های شارژ و اعتباری', icon: 'fas fa-credit-card' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه پوشاک
             'clothing': [
                 { value: 'accessories_section', label: 'بخش اکسسوری و کیف', icon: 'fas fa-handbag' },
                 { value: 'shoes_department', label: 'بخش کفش و صندل', icon: 'fas fa-shoe-prints' },
                 { value: 'lingerie_section', label: 'بخش لباس زیر و خواب', icon: 'fas fa-moon' },
                 { value: 'kids_clothing', label: 'بخش پوشاک کودکان', icon: 'fas fa-child' },
                 { value: 'formal_wear', label: 'لباس‌های رسمی و مجلسی', icon: 'fas fa-user-tie' },
                 { value: 'casual_wear', label: 'لباس‌های روزمره', icon: 'fas fa-tshirt' },
                 { value: 'sports_wear', label: 'لباس‌های ورزشی', icon: 'fas fa-running' },
                 { value: 'winter_collection', label: 'مجموعه زمستانی', icon: 'fas fa-snowflake' },
                 { value: 'summer_collection', label: 'مجموعه تابستانی', icon: 'fas fa-sun' },
                 { value: 'sale_section', label: 'بخش حراج و تخفیف', icon: 'fas fa-percentage' },
                 { value: 'fitting_rooms', label: 'اتاق‌های پرو', icon: 'fas fa-door-open' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم الکترونیکی
             'electronics': [
                 { value: 'mobile_phones', label: 'بخش موبایل و تبلت', icon: 'fas fa-mobile-alt' },
                 { value: 'laptop_computers', label: 'بخش لپ‌تاپ و کامپیوتر', icon: 'fas fa-laptop' },
                 { value: 'gaming_consoles', label: 'بخش کنسول‌های بازی', icon: 'fas fa-gamepad' },
                 { value: 'audio_equipment', label: 'بخش صوتی و تصویری', icon: 'fas fa-headphones' },
                 { value: 'camera_equipment', label: 'بخش دوربین و عکاسی', icon: 'fas fa-camera' },
                 { value: 'smart_home', label: 'بخش خانه هوشمند', icon: 'fas fa-home' },
                 { value: 'accessories', label: 'بخش لوازم جانبی', icon: 'fas fa-plug' },
                 { value: 'software_section', label: 'بخش نرم‌افزار و بازی', icon: 'fas fa-download' },
                 { value: 'repair_service', label: 'بخش تعمیرات و خدمات', icon: 'fas fa-tools' },
                 { value: 'demo_area', label: 'محل نمایش محصولات', icon: 'fas fa-tv' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم خانگی
             'home_appliances': [
                 { value: 'kitchen_appliances', label: 'لوازم آشپزخانه', icon: 'fas fa-blender' },
                 { value: 'refrigerators', label: 'یخچال و فریزر', icon: 'fas fa-snowflake' },
                 { value: 'washing_machines', label: 'ماشین لباسشویی و خشک‌کن', icon: 'fas fa-tshirt' },
                 { value: 'air_conditioners', label: 'کولر و سیستم تهویه', icon: 'fas fa-wind' },
                 { value: 'tv_audio', label: 'تلویزیون و سیستم صوتی', icon: 'fas fa-tv' },
                 { value: 'vacuum_cleaners', label: 'جاروبرقی و نظافت', icon: 'fas fa-broom' },
                 { value: 'small_appliances', label: 'لوازم کوچک خانگی', icon: 'fas fa-coffee' },
                 { value: 'heating_cooling', label: 'سیستم گرمایش و سرمایش', icon: 'fas fa-thermometer-half' },
                 { value: 'demo_kitchen', label: 'آشپزخانه نمایشی', icon: 'fas fa-utensils' },
                 { value: 'service_center', label: 'مرکز خدمات پس از فروش', icon: 'fas fa-tools' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // داروخانه
             'pharmacy': [
                 { value: 'prescription_drugs', label: 'بخش داروهای نسخه‌ای', icon: 'fas fa-prescription' },
                 { value: 'otc_medicines', label: 'داروهای بدون نسخه', icon: 'fas fa-pills' },
                 { value: 'vitamins_supplements', label: 'ویتامین‌ها و مکمل‌ها', icon: 'fas fa-capsules' },
                 { value: 'personal_care', label: 'لوازم بهداشتی شخصی', icon: 'fas fa-soap' },
                 { value: 'baby_care', label: 'محصولات مراقبت نوزاد', icon: 'fas fa-baby' },
                 { value: 'first_aid', label: 'لوازم کمک‌های اولیه', icon: 'fas fa-first-aid' },
                 { value: 'medical_devices', label: 'تجهیزات پزشکی خانگی', icon: 'fas fa-stethoscope' },
                 { value: 'dental_care', label: 'محصولات بهداشت دهان', icon: 'fas fa-tooth' },
                 { value: 'skin_care', label: 'محصولات مراقبت پوست', icon: 'fas fa-spa' },
                 { value: 'consultation_area', label: 'محل مشاوره دارویی', icon: 'fas fa-user-md' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // کتابفروشی
             'bookstore': [
                 { value: 'fiction_books', label: 'کتاب‌های داستانی', icon: 'fas fa-book-open' },
                 { value: 'non_fiction', label: 'کتاب‌های غیرداستانی', icon: 'fas fa-graduation-cap' },
                 { value: 'academic_books', label: 'کتاب‌های دانشگاهی', icon: 'fas fa-university' },
                 { value: 'children_books', label: 'کتاب‌های کودکان', icon: 'fas fa-child' },
                 { value: 'magazines', label: 'مجلات و نشریات', icon: 'fas fa-newspaper' },
                 { value: 'stationery', label: 'لوازم التحریر', icon: 'fas fa-pen' },
                 { value: 'gift_items', label: 'محصولات هدیه', icon: 'fas fa-gift' },
                 { value: 'coffee_shop', label: 'کافه کتاب', icon: 'fas fa-coffee' },
                 { value: 'reading_area', label: 'محل مطالعه', icon: 'fas fa-chair' },
                 { value: 'events_space', label: 'محل برگزاری رویدادها', icon: 'fas fa-calendar' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه جواهرات
             'jewelry': [
                 { value: 'gold_jewelry', label: 'جواهرات طلا', icon: 'fas fa-gem' },
                 { value: 'silver_jewelry', label: 'جواهرات نقره', icon: 'fas fa-ring' },
                 { value: 'diamond_jewelry', label: 'جواهرات الماس', icon: 'fas fa-diamond' },
                 { value: 'pearl_jewelry', label: 'جواهرات مروارید', icon: 'fas fa-circle' },
                 { value: 'watches_section', label: 'بخش ساعت', icon: 'fas fa-clock' },
                 { value: 'engagement_rings', label: 'حلقه‌های نامزدی', icon: 'fas fa-heart' },
                 { value: 'wedding_jewelry', label: 'جواهرات عروسی', icon: 'fas fa-dove' },
                 { value: 'children_jewelry', label: 'جواهرات کودکان', icon: 'fas fa-child' },
                 { value: 'luxury_brands', label: 'برندهای لوکس', icon: 'fas fa-crown' },
                 { value: 'custom_design', label: 'طراحی سفارشی', icon: 'fas fa-palette' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه ورزشی
             'sports': [
                 { value: 'football_equipment', label: 'لوازم فوتبال', icon: 'fas fa-futbol' },
                 { value: 'basketball_equipment', label: 'لوازم بسکتبال', icon: 'fas fa-basketball-ball' },
                 { value: 'tennis_equipment', label: 'لوازم تنیس', icon: 'fas fa-table-tennis' },
                 { value: 'swimming_gear', label: 'لوازم شنا', icon: 'fas fa-swimming-pool' },
                 { value: 'fitness_equipment', label: 'لوازم بدنسازی', icon: 'fas fa-dumbbell' },
                 { value: 'running_gear', label: 'لوازم دویدن', icon: 'fas fa-running' },
                 { value: 'cycling_equipment', label: 'لوازم دوچرخه‌سواری', icon: 'fas fa-bicycle' },
                 { value: 'outdoor_gear', label: 'لوازم کوهنوردی و طبیعت', icon: 'fas fa-mountain' },
                 { value: 'team_sports', label: 'لوازم ورزش‌های تیمی', icon: 'fas fa-users' },
                 { value: 'sports_nutrition', label: 'تغذیه ورزشی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم آرایشی
             'cosmetics': [
                 { value: 'makeup_products', label: 'محصولات آرایشی', icon: 'fas fa-palette' },
                 { value: 'skincare_products', label: 'محصولات مراقبت پوست', icon: 'fas fa-spa' },
                 { value: 'hair_care', label: 'محصولات مراقبت مو', icon: 'fas fa-cut' },
                 { value: 'perfumes', label: 'عطر و ادکلن', icon: 'fas fa-spray-can' },
                 { value: 'nail_products', label: 'محصولات ناخن', icon: 'fas fa-hand-sparkles' },
                 { value: 'bath_body', label: 'محصولات حمام و بدن', icon: 'fas fa-bath' },
                 { value: 'men_cosmetics', label: 'لوازم آرایشی مردانه', icon: 'fas fa-user' },
                 { value: 'organic_cosmetics', label: 'محصولات ارگانیک', icon: 'fas fa-leaf' },
                 { value: 'beauty_tools', label: 'ابزارهای زیبایی', icon: 'fas fa-magic' },
                 { value: 'makeup_demo', label: 'محل تست محصولات', icon: 'fas fa-mirror' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // نانوایی و شیرینی‌فروشی
             'bakery': [
                 { value: 'fresh_bread', label: 'نان تازه', icon: 'fas fa-bread-slice' },
                 { value: 'pastries', label: 'شیرینی و کیک', icon: 'fas fa-birthday-cake' },
                 { value: 'sandwiches', label: 'ساندویچ و فست فود', icon: 'fas fa-hamburger' },
                 { value: 'coffee_tea', label: 'قهوه و چای', icon: 'fas fa-coffee' },
                 { value: 'dairy_products', label: 'محصولات لبنی', icon: 'fas fa-cheese' },
                 { value: 'beverages', label: 'نوشیدنی‌ها', icon: 'fas fa-wine-bottle' },
                 { value: 'snacks', label: 'تنقلات', icon: 'fas fa-cookie-bite' },
                 { value: 'seasonal_items', label: 'محصولات فصلی', icon: 'fas fa-calendar-alt' },
                 { value: 'custom_orders', label: 'سفارشات ویژه', icon: 'fas fa-clipboard-list' },
                 { value: 'seating_area', label: 'محل نشستن', icon: 'fas fa-chair' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // قصابی و گوشت‌فروشی
             'butcher': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // ماهی‌فروشی
             'fish_market': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // سبزی‌فروشی
             'vegetable_market': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // لبنیات‌فروشی
             'dairy_store': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // کفش‌فروشی
             'shoes_store': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه اکسسوری
             'accessories': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه مبلمان
             'furniture': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم آشپزخانه
             'kitchen_ware': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم باغبانی
             'garden_center': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه ابزارآلات
             'hardware': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // عینک‌فروشی
             'optical': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم التحریر
             'stationery': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه موسیقی
             'music_store': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه اسباب بازی
             'toy_store': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه ساعت
             'watches': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه عطر
             'perfume': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم اسپا
             'spa_products': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه تجهیزات بدنسازی
             'fitness_equipment': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه لوازم یدکی خودرو
             'auto_parts': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه حیوانات خانگی
             'pet_shop': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // گل‌فروشی
             'flower_shop': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ],
             
             // فروشگاه هدیه
             'gift_shop': [
                 { value: 'electronics', label: 'لوازم الکترونیکی', icon: 'fas fa-laptop' },
                 { value: 'clothing', label: 'پوشاک', icon: 'fas fa-tshirt' },
                 { value: 'books', label: 'کتاب‌ها', icon: 'fas fa-book' },
                 { value: 'sports', label: 'لوازم ورزشی', icon: 'fas fa-futbol' },
                 { value: 'jewelry', label: 'جواهرات', icon: 'fas fa-gem' },
                 { value: 'cosmetics', label: 'لوازم آرایشی', icon: 'fas fa-palette' },
                 { value: 'automotive', label: 'لوازم خودرو', icon: 'fas fa-car' },
                 { value: 'gardening', label: 'لوازم باغبانی', icon: 'fas fa-seedling' },
                 { value: 'food', label: 'مواد غذایی', icon: 'fas fa-apple-alt' },
                 { value: 'other', label: 'سایر', icon: 'fas fa-ellipsis-h' }
             ]
         };
         
         return options[storeType] || options['general'];
     }
});
</script>
{% endblock %} 
