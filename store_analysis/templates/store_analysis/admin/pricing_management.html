{% extends "store_analysis/admin/base.html" %}
{% load static %}

{% block admin_content %}
        <!-- Header -->
        <div class="admin-header">
    <div class="page-title">
        <div class="page-icon">
            <i class="fas fa-dollar-sign"></i>
        </div>
        Ù…Ø¯ÛŒØ±ÛŒØª Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ
    </div>
    <div class="admin-actions">
        <button class="btn-admin btn-primary" onclick="savePricingSettings()">
            <i class="fas fa-save"></i>
            Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
        </button>
        <button class="btn-admin btn-warning" onclick="resetPricingSettings()">
            <i class="fas fa-undo"></i>
            Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ
        </button>
    </div>
        </div>

<!-- Stats Grid -->
<div class="stats-grid">
    <div class="stat-card revenue">
        <div class="stat-header">
            <div class="stat-icon revenue">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="stat-trend up">
                <i class="fas fa-arrow-up"></i>
                +15% Ø§ÛŒÙ† Ù…Ø§Ù‡
            </div>
        </div>
        <div class="stat-number">{{ pricing_stats.total_revenue|floatformat:0 }}</div>
        <div class="stat-label">Ú©Ù„ Ø¯Ø±Ø¢Ù…Ø¯ (ØªÙˆÙ…Ø§Ù†)</div>
        <div class="stat-details">
            <div class="stat-detail">
                <span>Ø¯Ø±Ø¢Ù…Ø¯ Ù…Ø§Ù‡Ø§Ù†Ù‡</span>
                <span>{{ pricing_stats.monthly_revenue|floatformat:0 }}</span>
            </div>
            <div class="stat-detail">
                <span>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø³ÙØ§Ø±Ø´</span>
                <span>350,000</span>
            </div>
        </div>
        </div>

    <div class="stat-card analyses">
        <div class="stat-header">
            <div class="stat-icon analyses">
                <i class="fas fa-chart-bar"></i>
            </div>
            <div class="stat-trend up">
                <i class="fas fa-arrow-up"></i>
                {{ pricing_stats.paid_analyses }} Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡
            </div>
        </div>
        <div class="stat-number">{{ pricing_stats.total_analyses }}</div>
        <div class="stat-label">Ú©Ù„ ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§</div>
        <div class="stat-details">
            <div class="stat-detail">
                <span>Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡</span>
                <span>{{ pricing_stats.paid_analyses }}</span>
            </div>
            <div class="stat-detail">
                <span>Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</span>
                <span>{{ pricing_stats.pending_analyses }}</span>
            </div>
        </div>
    </div>

    <div class="stat-card users">
        <div class="stat-header">
            <div class="stat-icon users">
                <i class="fas fa-percentage"></i>
            </div>
            <div class="stat-trend up">
                <i class="fas fa-arrow-up"></i>
                Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† 25%
            </div>
        </div>
        <div class="stat-number">{{ pricing_stats.active_discounts }}</div>
        <div class="stat-label">Ú©Ø¯Ù‡Ø§ÛŒ ØªØ®ÙÛŒÙ ÙØ¹Ø§Ù„</div>
        <div class="stat-details">
            <div class="stat-detail">
                <span>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡</span>
                <span>{{ pricing_stats.used_discounts }}</span>
            </div>
            <div class="stat-detail">
                <span>Ø¯Ø±ØµØ¯ Ù…ÙˆÙÙ‚ÛŒØª</span>
                <span>85%</span>
            </div>
        </div>
                </div>

    <div class="stat-card tickets">
        <div class="stat-header">
            <div class="stat-icon tickets">
                <i class="fas fa-store"></i>
            </div>
            <div class="stat-trend up">
                <i class="fas fa-arrow-up"></i>
                Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ† Ù†ÙˆØ¹
            </div>
                    </div>
        <div class="stat-number">{{ pricing_stats.top_store_type }}</div>
        <div class="stat-label">Ù†ÙˆØ¹ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¨Ø±ØªØ±</div>
        <div class="stat-details">
            <div class="stat-detail">
                <span>ØªØ¹Ø¯Ø§Ø¯ ØªØ­Ù„ÛŒÙ„</span>
                <span>{{ pricing_stats.top_store_count }}</span>
                    </div>
            <div class="stat-detail">
                <span>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù‚ÛŒÙ…Øª</span>
                <span>400,000</span>
                    </div>
                        </div>
                    </div>
                </div>

<!-- Pricing Settings Form -->
<div class="content-card">
    <div class="card-header">
        <div class="card-title">
            <i class="fas fa-cog"></i>
            ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ
        </div>
    </div>
    
    <form id="pricingForm" method="post">
        {% csrf_token %}
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px;">
            <!-- Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡ -->
            <div>
                <h4 style="color: var(--text-primary); margin-bottom: 20px; font-size: 1.1rem;">
                    <i class="fas fa-tag" style="color: var(--primary-color); margin-left: 8px;"></i>
                    Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡
                </h4>
                
                <div class="form-group">
                    <label class="form-label">Ù‚ÛŒÙ…Øª ØªØ­Ù„ÛŒÙ„ Ø³Ø§Ø¯Ù‡</label>
                    <input type="number" name="simple_price" class="form-control" 
                           value="{{ current_settings.simple_price|default:200000 }}" 
                           placeholder="Ù‚ÛŒÙ…Øª Ø¨Ù‡ ØªÙˆÙ…Ø§Ù†" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ù‚ÛŒÙ…Øª ØªØ­Ù„ÛŒÙ„ Ù…ØªÙˆØ³Ø·</label>
                    <input type="number" name="medium_price" class="form-control" 
                           value="{{ current_settings.medium_price|default:350000 }}" 
                           placeholder="Ù‚ÛŒÙ…Øª Ø¨Ù‡ ØªÙˆÙ…Ø§Ù†" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ù‚ÛŒÙ…Øª ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒÚ†ÛŒØ¯Ù‡</label>
                    <input type="number" name="complex_price" class="form-control" 
                           value="{{ current_settings.complex_price|default:500000 }}" 
                           placeholder="Ù‚ÛŒÙ…Øª Ø¨Ù‡ ØªÙˆÙ…Ø§Ù†" required>
                </div>
            </div>
            
            <!-- ØªØ®ÙÛŒÙâ€ŒÙ‡Ø§ -->
            <div>
                <h4 style="color: var(--text-primary); margin-bottom: 20px; font-size: 1.1rem;">
                    <i class="fas fa-gift" style="color: var(--success-color); margin-left: 8px;"></i>
                    ØªØ®ÙÛŒÙâ€ŒÙ‡Ø§
                </h4>
                
                    <div class="form-group">
                    <label class="form-label">ØªØ®ÙÛŒÙ Ø§ÙØªØªØ§Ø­ÛŒÙ‡ (%)</label>
                    <input type="number" name="opening_discount" class="form-control" 
                           value="{{ current_settings.opening_discount|default:80 }}" 
                           placeholder="Ø¯Ø±ØµØ¯ ØªØ®ÙÛŒÙ" min="0" max="100">
                    </div>
                
                    <div class="form-group">
                    <label class="form-label">ØªØ®ÙÛŒÙ ÙØµÙ„ÛŒ (%)</label>
                    <input type="number" name="seasonal_discount" class="form-control" 
                           value="{{ current_settings.seasonal_discount|default:70 }}" 
                           placeholder="Ø¯Ø±ØµØ¯ ØªØ®ÙÛŒÙ" min="0" max="100">
                    </div>
                
                    <div class="form-group">
                    <label class="form-label">ØªØ®ÙÛŒÙ Ù†ÙˆØ±ÙˆØ²ÛŒ (%)</label>
                    <input type="number" name="newyear_discount" class="form-control" 
                           value="{{ current_settings.newyear_discount|default:60 }}" 
                           placeholder="Ø¯Ø±ØµØ¯ ØªØ®ÙÛŒÙ" min="0" max="100">
                </div>
            </div>
        </div>
    </form>
                    </div>

<!-- Store Type Statistics -->
<div class="content-card">
    <div class="card-header">
        <div class="card-title">
            <i class="fas fa-chart-pie"></i>
            Ø¢Ù…Ø§Ø± Ù†ÙˆØ¹ ÙØ±ÙˆØ´Ú¯Ø§Ù‡
                    </div>
                </div>

    <div style="overflow-x: auto;">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Ù†ÙˆØ¹ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</th>
                    <th>ØªØ¹Ø¯Ø§Ø¯ ØªØ­Ù„ÛŒÙ„</th>
                    <th>Ø¯Ø±ØµØ¯</th>
                    <th>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù‚ÛŒÙ…Øª</th>
                    <th>Ú©Ù„ Ø¯Ø±Ø¢Ù…Ø¯</th>
                </tr>
            </thead>
            <tbody>
                {% for stat in store_type_stats %}
                <tr>
                    <td>{{ stat.store_info__store_type|default:"Ù†Ø§Ù…Ø´Ø®Øµ" }}</td>
                    <td>{{ stat.count }}</td>
                    <td>{{ stat.percentage|floatformat:1 }}%</td>
                    <td>{{ stat.avg_price|floatformat:0 }} ØªÙˆÙ…Ø§Ù†</td>
                    <td>{{ stat.total_revenue|floatformat:0 }} ØªÙˆÙ…Ø§Ù†</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" style="text-align: center; color: var(--text-muted);">
                        <i class="fas fa-info-circle"></i>
                        Ù‡ÛŒÚ† Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯
                    </td>
                </tr>
                        {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Pricing Strategies -->
<div class="content-card">
    <div class="card-header">
        <div class="card-title">
            <i class="fas fa-bullseye"></i>
            Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ
        </div>
    </div>
    
    <div class="quick-actions">
        <div class="action-card" onclick="toggleStrategy('dynamic')">
            <div class="action-icon" style="background: var(--primary-color);">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="action-title">Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾ÙˆÛŒØ§</div>
            <div class="action-desc">Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªÙ‚Ø§Ø¶Ø§ Ùˆ Ø²Ù…Ø§Ù† ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯</div>
            <div class="status-badge status-active" id="dynamic-status">ÙØ¹Ø§Ù„</div>
        </div>

        <div class="action-card" onclick="toggleStrategy('smart_discounts')">
            <div class="action-icon" style="background: var(--success-color);">
                <i class="fas fa-gift"></i>
            </div>
            <div class="action-title">ØªØ®ÙÛŒÙâ€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</div>
            <div class="action-desc">ØªØ®ÙÛŒÙâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø±ÙØªØ§Ø± Ú©Ø§Ø±Ø¨Ø±</div>
            <div class="status-badge status-active" id="smart_discounts-status">ÙØ¹Ø§Ù„</div>
                </div>

        <div class="action-card" onclick="toggleStrategy('competitive')">
            <div class="action-icon" style="background: var(--warning-color);">
                <i class="fas fa-search-dollar"></i>
            </div>
            <div class="action-title">ØªØ­Ù„ÛŒÙ„ Ø±Ù‚Ø§Ø¨ØªÛŒ</div>
            <div class="action-desc">Ø¨Ø±Ø±Ø³ÛŒ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ø±Ù‚Ø¨Ø§ Ùˆ ØªÙ†Ø¸ÛŒÙ… Ø®ÙˆØ¯Ú©Ø§Ø±</div>
            <div class="status-badge status-inactive" id="competitive-status">ØºÛŒØ±ÙØ¹Ø§Ù„</div>
            </div>

        <div class="action-card" onclick="toggleStrategy('seasonal')">
            <div class="action-icon" style="background: var(--info-color);">
                <i class="fas fa-calendar-alt"></i>
            </div>
            <div class="action-title">Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ ÙØµÙ„ÛŒ</div>
            <div class="action-desc">ØªØºÛŒÛŒØ± Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ ÙØµÙ„ Ùˆ Ù…Ù†Ø§Ø³Ø¨Øªâ€ŒÙ‡Ø§</div>
            <div class="status-badge status-pending" id="seasonal-status">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/http-fetch-helper.js' %}"></script>
    <script>
// Ù…Ù‚Ø§Ø¯ÛŒØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ
const defaultValues = {
    'simple_price': parseInt('{{ current_settings.simple_price|default:200000 }}') || 200000,
    'medium_price': parseInt('{{ current_settings.medium_price|default:350000 }}') || 350000,
    'complex_price': parseInt('{{ current_settings.complex_price|default:500000 }}') || 500000,
    'opening_discount': parseInt('{{ current_settings.opening_discount|default:80 }}') || 80,
    'seasonal_discount': parseInt('{{ current_settings.seasonal_discount|default:70 }}') || 70,
    'newyear_discount': parseInt('{{ current_settings.newyear_discount|default:60 }}') || 60
};

// Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ
function savePricingSettings() {
    const form = document.getElementById('pricingForm');
    const saveBtn = event.target;
    
    // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
    const inputs = form.querySelectorAll('input[required]');
    let isValid = true;
    
    inputs.forEach(input => {
        if (!input.value || input.value <= 0) {
            input.style.borderColor = 'var(--danger-color)';
            isValid = false;
        } else {
            input.style.borderColor = 'var(--border-color)';
        }
    });
    
    if (!isValid) {
        showAlert('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯', 'danger');
        return;
    }
    
    // Ù†Ù…Ø§ÛŒØ´ Ù„ÙˆØ¯ÛŒÙ†Ú¯
    saveBtn.disabled = true;
    saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¯Ø± Ø­Ø§Ù„ Ø°Ø®ÛŒØ±Ù‡...';
    
    // Ø§Ø±Ø³Ø§Ù„ ÙØ±Ù…
    const formAction = form.action || window.location.pathname;
    
    httpFetch(formAction, {
        method: 'POST',
        body: new FormData(form),
        headers: {
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        }
    })
    .then(response => {
        if (response.ok) {
            return response.json();
        }
        throw new Error('Network response was not ok');
    })
    .then(data => {
        if (data.success) {
            showAlert('ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‚ÛŒÙ…Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'success');
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ ÙØ±Ù…
            setTimeout(() => {
                window.location.reload();
            }, 1500);
        } else {
            showAlert(data.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª', 'danger');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showAlert('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.', 'danger');
    })
    .finally(() => {
        // Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø¯Ú©Ù…Ù‡
        saveBtn.disabled = false;
        saveBtn.innerHTML = '<i class="fas fa-save"></i> Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª';
    });
}

// Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
function resetPricingSettings() {
    if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ø§ Ø¨Ù‡ Ø­Ø§Ù„Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒØ¯ØŸ')) {
        Object.keys(defaultValues).forEach(name => {
            const input = document.querySelector(`[name="${name}"]`);
            if (input) {
                input.value = defaultValues[name];
                input.style.borderColor = 'var(--border-color)';
            }
        });
        showAlert('ğŸ”„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ù‡ Ø­Ø§Ù„Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ø´Ø¯', 'success');
    }
}

// ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ
function toggleStrategy(strategy) {
    const statusElement = document.getElementById(strategy + '-status');
    const isActive = statusElement.classList.contains('status-active');
    
    if (isActive) {
        statusElement.classList.remove('status-active');
        statusElement.classList.add('status-inactive');
        statusElement.textContent = 'ØºÛŒØ±ÙØ¹Ø§Ù„';
    } else {
        statusElement.classList.remove('status-inactive');
        statusElement.classList.add('status-active');
        statusElement.textContent = 'ÙØ¹Ø§Ù„';
    }
    
    showAlert(`Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ ${strategy} ${isActive ? 'ØºÛŒØ±ÙØ¹Ø§Ù„' : 'ÙØ¹Ø§Ù„'} Ø´Ø¯`, 'success');
}

// Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…
function showAlert(message, type) {
    // Ø­Ø°Ù Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ
    const existingAlerts = document.querySelectorAll('.alert');
    existingAlerts.forEach(alert => alert.remove());
    
    // Ø§ÛŒØ¬Ø§Ø¯ Ù¾ÛŒØ§Ù… Ø¬Ø¯ÛŒØ¯
    const alert = document.createElement('div');
    alert.className = `alert alert-${type}`;
    alert.style.cssText = `
        padding: 15px 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 10px;
        background: ${type === 'success' ? 'rgba(16, 185, 129, 0.1)' : 'rgba(239, 68, 68, 0.1)'};
        color: ${type === 'success' ? 'var(--success-color)' : 'var(--danger-color)'};
        border: 1px solid ${type === 'success' ? 'rgba(16, 185, 129, 0.2)' : 'rgba(239, 68, 68, 0.2)'};
    `;
    alert.innerHTML = message;
    
    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø¨Ø§Ù„Ø§ÛŒ ØµÙØ­Ù‡
    const mainContent = document.querySelector('.admin-main');
    mainContent.insertBefore(alert, mainContent.firstChild);
    
    // Ø­Ø°Ù Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² 5 Ø«Ø§Ù†ÛŒÙ‡
    setTimeout(() => {
        alert.remove();
    }, 5000);
}

// Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('pricingForm');
    form.querySelectorAll('input').forEach(input => {
        input.addEventListener('input', function() {
            if (this.value && this.value > 0) {
                this.style.borderColor = 'var(--success-color)';
            } else {
                this.style.borderColor = 'var(--border-color)';
            }
        });
    });
});
</script>
{% endblock %}
