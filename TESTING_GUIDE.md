# 🧪 راهنمای کامل تست سیستم چیدمانو

## 📋 فهرست مطالب
- [معرفی](#معرفی)
- [پیش‌نیازها](#پیش‌نیازها)
- [نحوه اجرا](#نحوه-اجرا)
- [اسکریپت‌های تست](#اسکریپت‌های-تست)
- [گزارش‌ها](#گزارش‌ها)
- [عیب‌یابی](#عیب‌یابی)

## 🎯 معرفی

این مجموعه اسکریپت‌ها برای تست کامل سیستم چیدمانو طراحی شده‌اند. این تست‌ها شامل:

- ✅ تست کامل جریان کاربر (از ثبت‌نام تا دریافت گزارش)
- ✅ تست داشبورد ادمین و مدیریت سیستم
- ✅ تست سیستم AI و تحلیل فروشگاه
- ✅ تست عملکرد، امنیت و ریسپانسیو بودن

## 🔧 پیش‌نیازها

### 1. نصب Django و وابستگی‌ها
```bash
pip install -r requirements.txt
```

### 2. تنظیم دیتابیس
```bash
python manage.py makemigrations
python manage.py migrate
```

### 3. ایجاد ابرکاربر
```bash
python manage.py createsuperuser
```

### 4. اجرای سرور
```bash
python manage.py runserver 0.0.0.0:8000
```

## 🚀 نحوه اجرا

### اجرای تمام تست‌ها (پیشنهادی)
```bash
python run_complete_tests.py
```

### اجرای تست‌های جداگانه

#### 1. تست کامل سیستم
```bash
python complete_system_test.py
```

#### 2. تست داشبورد ادمین
```bash
python admin_dashboard_test.py
```

#### 3. تست سیستم AI
```bash
python ai_analysis_test.py
```

## 📊 اسکریپت‌های تست

### 1. `complete_system_test.py`
**هدف**: تست کامل جریان کاربر از ثبت‌نام تا دریافت گزارش

**تست‌های شامل**:
- 🔗 تست اتصال به سرور
- 👤 ایجاد کاربر تست
- 👑 ایجاد ادمین
- 🏠 تست صفحه اصلی
- 📝 تست ثبت‌نام
- 🔐 تست ورود
- 📋 تست فرم 7 مرحله‌ای
- 💳 تست پرداخت
- 🤖 تست تحلیل AI
- 📊 تست نتایج
- 👤 تست داشبورد کاربر
- 👑 تست داشبورد ادمین
- ⚙️ تست مدیریت ادمین
- 📈 تست گزارش‌گیری
- 🔌 تست API ها
- ⚡ تست عملکرد
- 🔒 تست امنیت
- 📱 تست موبایل
- 🚨 تست مدیریت خطا
- ✅ تست تأیید نهایی

### 2. `admin_dashboard_test.py`
**هدف**: تست کامل داشبورد ادمین و مدیریت سیستم

**تست‌های شامل**:
- 👑 ایجاد و ورود ادمین
- 📊 تست داشبورد اصلی
- 👥 تست مدیریت کاربران
- 📈 تست مدیریت تحلیل‌ها
- 🛒 تست مدیریت سفارشات
- 💰 تست مدیریت قیمت‌گذاری
- 🎫 تست مدیریت تخفیف‌ها
- 🖼️ تست مدیریت بنرها
- 📊 تست گزارش‌گیری
- 📈 تست آمار و تحلیل‌ها
- ⚙️ تست تنظیمات سیستم

### 3. `ai_analysis_test.py`
**هدف**: تست کامل سیستم AI و تحلیل فروشگاه

**تست‌های شامل**:
- 🔗 تست اتصال AI
- 📊 تست تحلیل پایه
- 🔬 تست تحلیل پیشرفته
- 🎯 تست تحلیل SWOT
- 💡 تست پیشنهادات
- ⭐ تست سیستم امتیازدهی
- 🏆 تست تحلیل رقابتی
- 👥 تست تحلیل مشتریان
- 💰 تست تحلیل فروش
- ⚙️ تست تحلیل عملیاتی
- 📋 تست تولید گزارش
- ⚡ تست عملکرد AI

## 📋 گزارش‌ها

### فایل‌های گزارش تولید شده:

1. **`test_report.json`** - گزارش تست کامل سیستم
2. **`admin_test_report.json`** - گزارش تست ادمین
3. **`ai_test_report.json`** - گزارش تست AI
4. **`final_test_report.json`** - گزارش نهایی تمام تست‌ها

### محتوای گزارش‌ها:

#### گزارش تست کامل سیستم
```json
{
  "test_date": "2025-09-10T03:30:00",
  "test_user": "test_fruit_store",
  "admin_user": "admin_fruit_store",
  "order_id": "uuid-here",
  "store_data": {...},
  "ai_analysis": {...},
  "database_stats": {...}
}
```

#### گزارش تست ادمین
```json
{
  "test_date": "2025-09-10T03:30:00",
  "admin_user": "admin_test",
  "system_stats": {...},
  "test_results": {...}
}
```

#### گزارش تست AI
```json
{
  "test_date": "2025-09-10T03:30:00",
  "store_data": {...},
  "test_results": {...},
  "summary": {...}
}
```

## 🔍 عیب‌یابی

### مشکلات رایج:

#### 1. خطای اتصال به سرور
```
❌ خطا در اتصال به سرور: Connection refused
```
**راه حل**: مطمئن شوید سرور Django در حال اجرا است:
```bash
python manage.py runserver 0.0.0.0:8000
```

#### 2. خطای دیتابیس
```
❌ خطا در ایجاد کاربر تست: relation does not exist
```
**راه حل**: مایگریشن‌ها را اجرا کنید:
```bash
python manage.py makemigrations
python manage.py migrate
```

#### 3. خطای AI
```
❌ خطا در تست تحلیل AI: Ollama connection failed
```
**راه حل**: مطمئن شوید Ollama نصب و اجرا شده است:
```bash
# نصب Ollama
curl -fsSL https://ollama.ai/install.sh | sh

# اجرای Ollama
ollama serve

# نصب مدل
ollama pull llama2
```

#### 4. خطای فایل‌های تست
```
❌ فایل complete_system_test.py یافت نشد
```
**راه حل**: مطمئن شوید تمام فایل‌های تست در دایرکتوری اصلی پروژه هستند.

### لاگ‌های مفید:

#### بررسی لاگ‌های Django
```bash
tail -f logs/django.log
```

#### بررسی لاگ‌های سرور
```bash
python manage.py runserver --verbosity=2
```

## 📊 تفسیر نتایج

### امتیازات تست:

- ✅ **موفق**: تست بدون خطا اجرا شد
- ⚠️ **هشدار**: تست اجرا شد اما نتیجه غیرمنتظره داشت
- ❌ **ناموفق**: تست با خطا مواجه شد

### معیارهای عملکرد:

- **سرعت بارگذاری**: < 2 ثانیه (عالی)
- **زمان تحلیل AI**: < 5 ثانیه (عالی)
- **زمان کل تست**: < 5 دقیقه (قابل قبول)

### آمار دیتابیس:

- **کاربران**: باید شامل کاربر تست و ادمین باشد
- **تحلیل‌ها**: باید شامل تحلیل‌های تولید شده باشد
- **سفارشات**: باید شامل سفارشات پرداخت شده باشد

## 🎯 نکات مهم

### برای ادمین:
1. **داشبورد ادمین** باید تمام آمار و مدیریت‌ها را نشان دهد
2. **گزارش‌گیری** باید کامل و دقیق باشد
3. **مدیریت کاربران** باید تمام عملیات CRUD را پشتیبانی کند

### برای کاربر:
1. **فرم 7 مرحله‌ای** باید روان و بدون خطا کار کند
2. **پرداخت** باید امن و قابل اعتماد باشد
3. **نتایج تحلیل** باید کامل و قابل فهم باشد

### برای سیستم:
1. **AI** باید تحلیل‌های دقیق و مفید ارائه دهد
2. **عملکرد** باید سریع و بهینه باشد
3. **امنیت** باید در تمام سطوح رعایت شود

## 📞 پشتیبانی

در صورت بروز مشکل:
1. لاگ‌های خطا را بررسی کنید
2. گزارش‌های JSON را مطالعه کنید
3. مستندات Django را مراجعه کنید
4. با تیم توسعه تماس بگیرید

---

**🎉 موفق باشید در تست سیستم چیدمانو!**
